<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Railroad Guerrilla">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Railroad Guerrilla">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="潘曲阳 朱霖淇 刘浩钊">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Railroad Guerrilla</title>
  








<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Railroad Guerrilla</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录竞赛生涯</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/04/13/CF-1503/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/13/CF-1503/" itemprop="url">CF_1503</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-04-13T14:15:17+08:00">
                2021-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="A-Deja-Vu"><a href="#A-Deja-Vu" class="headerlink" title="A.Déjà Vu"></a>A.Déjà Vu</h1><p>显然只有全 $a$ 字符串才不能被构造，否则找一个非 $a$ 字符，在它的对称位置上插入 $a$。</p>
<h1 id="B-Flip-the-Bits"><a href="#B-Flip-the-Bits" class="headerlink" title="B.Flip the Bits"></a>B.Flip the Bits</h1><p>从前往后翻转，以前缀中01数量相等的字符串为分割点将字符串分割为许多段。分开讨论每一段能否翻转为目标即可。</p>
<h1 id="C-Balance-the-Bits"><a href="#C-Balance-the-Bits" class="headerlink" title="C.Balance the Bits"></a>C.Balance the Bits</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给一个长度为 $n\leq 2\times 10^5$ 01序列 $\{s_i\}$ 要求构造两个长度为 $n$ 括号序列 $\{a_i\}, \{b_i\}$，使得这两个括号序列满足</p>
<blockquote>
<p>$s_i=1\to a_i=b_i$</p>
<p>$s_i=0\to a_i \neq b_i$</p>
</blockquote>
<p>且两个括号序列合法</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>考虑将括号序列转化为 $+1 -1$ 序列，显然有合法序列任意前缀和都不小于0且最终的和等于0。</p>
<p>对于 $s_i=1$ ，两个序列的前缀和同加同减<br>对于 $s_i=0$ ，一个序列+1，一个序列-1</p>
<p>如果最终两个序列都合法，那么两个序列最终的和均为0，所以我们显然要使得两个序列的前缀和尽量接近。对于 $s_i = 1$，两个序列的前缀和差值不会发生变化，但是 $s_i=0$，两个序列的前缀和会变化1，那么此时我们只需要两个序列分别交替进行+1-1操作即可。</p>
<p>为了保证操作始终合法，对于$s_i=1$的操作，我们要让前缀和的平均值 $\frac{A+B}{2}$ 不低于1。为了让最终的序列的合法化尽量简单，应有 $\frac{A+B}{2}\leq2$。贪心构造即可。</p>
<h1 id="D-3-Coloring"><a href="#D-3-Coloring" class="headerlink" title="D.3-Coloring"></a>D.3-Coloring</h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>交互题，给一个 $n\times n$ 的格子填色，有三种颜色可选，每次由交互方决定填充时不能填充哪种颜色，由我们决定填充哪种颜色，填到哪个格子，要求相邻格子不同色。</p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>首先贪心，将格子分为 $A(x_i+y_i=1\mod2)$ 和 $B(x_i+y_i=0\mod 2)$ 两类，每次必定能够填充颜色1或者2，能填充1时均填到A中，反之则填到B中。当某一类的格子被填满后，遇到无法仅用1、2填充剩余格子时，选择填充颜色3到剩余格子中。</p>
<h1 id="E-Travelling-Salesman-Problem"><a href="#E-Travelling-Salesman-Problem" class="headerlink" title="E. Travelling Salesman Problem"></a>E. Travelling Salesman Problem</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>有 $n\leq 10^5$ 个城市，现在要从1号城市出发，每个城市都经过且仅经过一次。<br>对于每个城市有两个值 $a_i,c_i$，从 $i$ 城市到 $j$ 城市的代价为 $max(c_i, a_j-a_i)$。</p>
<p>问最小代价。</p>
<h2 id="题解：最短路-贪心"><a href="#题解：最短路-贪心" class="headerlink" title="题解：最短路/贪心"></a>题解：最短路/贪心</h2><p>首先出发的点不重要，因为是一个循环，每个点都可以看作起点。</p>
<p>其次对于 $a_j\geq a_i$，代价恒为 $c_i$ ，因此我们可以将所有点按照 $a_i$ 从大到小排序，当我们从 $a_i$ 更大的点往下走是，代价一定最小，为 $c_i$。</p>
<p>那么我们需要考虑的问题是从 $a_i$ 最小的点走到 $a_i$ 最大的点最小代价为多少？</p>
<h3 id="最短路"><a href="#最短路" class="headerlink" title="最短路"></a>最短路</h3><p>假设当前 $a_i$ 是按照从小到大排列的，那么 $n$ 点的值最大，它为终点。</p>
<p>如果考虑类似最短路的做法，我们提前将 $c_i$ 累加，这样走到 $n$ 点后我们无需考虑剩余没有走的点，因为它们产生的额外代价为 $0$ 。</p>
<p>1、当 $a_j\leq a_i$ 时，代价不一定比 $c_i$ 更大，因此从 $i\to j$ 不一定会产生额外代价。那么贪心地讲，对于所有满足 $a_j-a_i\leq c_i$ 的 $j$ ，我们只需要连一条长度为 $0$ 的边到最大的 $j$，其余满足条件的 $j$ 都不会更优 。</p>
<p>2、当会产生额外代价时，我们希望这个额外代价尽量小，因为此时产生的是“额外代价”，因此我们连一条边到最小的满足 $a_j-a_i\geq c_i$ 的 $j$ ，长度为 $a_j-a_i-c_i$。</p>
<p>跑最短路即可。</p>
<h3 id="贪心"><a href="#贪心" class="headerlink" title="贪心"></a>贪心</h3><p>同样假设 $a_i$ 已经排序。</p>
<p>在最短路做法中，分别考虑两类边的目的：第一类边是为了以最小的代价增加所在点的 $a_i$ 值，什么时候 $a_i$ 值增加有可能不是最优解呢？ $a_i$ 增加而 $a_i+c_i$ 不增加时。第二类边实际上可以看作以最小的代价跑到 $n$ 点，当我们需要跑第二类边时，实际上是额外代价无法避免的时候，此时我们希望通过尽量增大 $a_i+c_i$ 值以减少额外代价。</p>
<p>综上，实际上我们是希望路径上的 $a_i+c_i$ 值最大。那么据此我们可以遍历 $1$ 到 $n$ ，对于点 $i$ ，我们增加代价为 $max(a_i-max_{j&lt;i}(a_j+c_j), 0)$。</p>
<p>算法正确性：当 $a_i-max_{j<i}(a_j+b_j)>0$ 时，必然有 $a_i+c_i&gt;a_j+c_j$ ，此时 $max_{j\leq i} (a_j+b_j)$ 的点必定为 $i$ ，可以视为最大值点更新。由于上述性质，最大值点的更新路径唯一，其余无法更新最大值的点可以视为额外代价为0。</i}(a_j+b_j)></p>
<p>最终解为 $\sum c_i+\sum_{i=1}^nmax(a_i-max_{j&lt;i}(a_j+c_j),0)$</p>
<h1 id="F-Flip-the-Cards"><a href="#F-Flip-the-Cards" class="headerlink" title="F.Flip the Cards"></a>F.Flip the Cards</h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>有 $n\leq 2\cdot 10^5$ 张卡片，每张卡片正反面有两个数字，$1-2n$ 的所有数字出现且仅出现一次，将正面的数字记为 $a_i$ ，反面记为 $b_i$。现在能翻转并重新排列所有卡片，问最少翻转多少次能够使得重新排列后的卡片满足</p>
<p>$a_1<a_2<...<a_n$ $b_1>b_2&gt;…&gt;b_n$</a_2<...<a_n$></p>
<h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2>
          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/03/13/ICPC-%E5%8D%97%E4%BA%AC-2018/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/13/ICPC-%E5%8D%97%E4%BA%AC-2018/" itemprop="url">ICPC-南京-2018</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-03-13T08:14:53+08:00">
                2021-03-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ICPC/" itemprop="url" rel="index">
                    <span itemprop="name">ICPC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="A-Adrien-and-Austin"><a href="#A-Adrien-and-Austin" class="headerlink" title="A.Adrien and Austin"></a>A.Adrien and Austin</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>$N$ 个石头，标号从1到 $N$ 。每次可以选择不超过 $K$ 个连续标号的石头移除，取走最后一颗的人胜。</p>
<h2 id="题解：博弈"><a href="#题解：博弈" class="headerlink" title="题解：博弈"></a>题解：博弈</h2><p>特判 $N = 0$ 和 $K = 1$  的情况，其余情况先手可以通过取中间的石头使得剩余石头被分为相同的两端，后手取啥先手就取啥，先手必胜。</p>
<h1 id="B-Tournament"><a href="#B-Tournament" class="headerlink" title="B.Tournament"></a>B.Tournament</h1><h1 id="C-Cherry-and-Chocolate"><a href="#C-Cherry-and-Chocolate" class="headerlink" title="C.Cherry and Chocolate"></a>C.Cherry and Chocolate</h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>给一颗 $n\in[3,10^5]$ 个点的树，A取一个点标记为粉色，B取一个点标记为棕色，A再取一个点标记为粉色。记从棕色出发，需要经过粉色的点才能到达的点的个数为最终分数。A希望使分数最大，B希望使分数最小，问最大分数为多少？</p>
<h2 id="题解：树的重心"><a href="#题解：树的重心" class="headerlink" title="题解：树的重心"></a>题解：树的重心</h2><p>记 A 选择的第一个点为 $a$ ， B 选择的点为 $b$ ， A 选择的第二个点为 $c$</p>
<p>那么对于一个确定的点 $a$ ， $b$ 必然选择以 $a$ 为根时树 $tree_a=<V,E>$ 所有子树 $subtree_x=<V',E'>\in tree_a$(以 $x$ 为 $subtree_x$ 的重心) 中某一颗子树的重心，这样才能使得 $c$ 所限制的点尽量少 ， 而 $c$ 也必然选择 $subtree_x$ 的重儿子。每次处理出所有 $subtree_x$ 中得到结果最大的子树，即为 $subtree_b$ 则我们得到了对于 $a$ 的最优解 $(a,b,c)$。</V',E'></V,E></p>
<p>此时我们换根到 $a’$ ，若 $a’\in tree-subtree_b$ ，也就是选择 $subtree_b$ 以外的点，那么 $b$ 保持不变，结果必不能更优，因此仅能在 $subtree_b$ 内选择 $a’$ 。</p>
<p>每次可供选择的 $a$ 点的范围都是一个联通的子树，我们选择树的重心，就能使选择范围进一步缩小，最终选择的 $a$ 点的总数目不超过 $logn$ 个，每次在给定 $a$ 点的情况下选择最优解的复杂度为 $O(n)$ ，因此最终复杂度为 $o(nlogn)$</p>
<h1 id="D-Country-Meow"><a href="#D-Country-Meow" class="headerlink" title="D.Country Meow"></a>D.Country Meow</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>三维空间内给 $n\leq 100$ 个点 ， 找一个点使得它到所有点的中距离最远的点的距离最小。</p>
<h2 id="题解：最小球覆盖"><a href="#题解：最小球覆盖" class="headerlink" title="题解：最小球覆盖"></a>题解：最小球覆盖</h2><p>套板子即可，复杂度 $O(n^3)$。</p>
<p>模拟退火学习失败。</p>
<h1 id="E-Eva-and-Euro-coins"><a href="#E-Eva-and-Euro-coins" class="headerlink" title="E.Eva and Euro coins"></a>E.Eva and Euro coins</h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>有 $n \leq 10^6$ 个硬币，顺序排列，给定它们的初始状态及目标状态。</p>
<p>每次可以选择 $k$ 个连续的硬币翻面，问能否在有限次翻面的情况下达到目标状态。</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>从左到右贪心翻转即可。</p>
<h1 id="F-Frank"><a href="#F-Frank" class="headerlink" title="F.Frank"></a>F.Frank</h1><h1 id="G-Pyramid"><a href="#G-Pyramid" class="headerlink" title="G.Pyramid"></a>G.Pyramid</h1><h1 id="H-Huge-Discount"><a href="#H-Huge-Discount" class="headerlink" title="H.Huge Discount"></a>H.Huge Discount</h1><h1 id="I-Magic-Potion"><a href="#I-Magic-Potion" class="headerlink" title="I.Magic Potion"></a>I.Magic Potion</h1><h2 id="题意-4"><a href="#题意-4" class="headerlink" title="题意"></a>题意</h2><p>有 $n$ 个英雄，$m$ 个怪兽，$k$ 瓶药水。不同的英雄能够杀死的怪兽不同，每个英雄都能杀死能够杀死的怪兽中的一个，如果给他一瓶药水，能够多杀一个，但每个英雄只能喝一瓶药水。</p>
<p>问最多能够杀死多少怪兽。</p>
<h2 id="题解：网络流"><a href="#题解：网络流" class="headerlink" title="题解：网络流"></a>题解：网络流</h2><p>分两个源点，分别连向每一个英雄，每个英雄连向其对应的怪兽。第一个源点的流量限制为 $n$ ，第二个限制为 $k$ ，每个源点与单个英雄间流量限制为1。</p>
<h1 id="J-Prime-Game"><a href="#J-Prime-Game" class="headerlink" title="J.Prime Game"></a>J.Prime Game</h1><h2 id="题意-5"><a href="#题意-5" class="headerlink" title="题意"></a>题意</h2><p>有 $n$ 个数，定义 $mul(l, r) = \prod$</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/14/%E6%96%9C%E7%8E%87%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/02/14/%E6%96%9C%E7%8E%87%E4%BC%98%E5%8C%96/" itemprop="url">斜率优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-02-14T17:45:41+08:00">
                2021-02-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BB%83%E4%B9%A0%E9%A2%98%E9%9B%86/" itemprop="url" rel="index">
                    <span itemprop="name">练习题集</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ZJOI-2007-仓库建设"><a href="#ZJOI-2007-仓库建设" class="headerlink" title="ZJOI 2007 仓库建设"></a><a href="https://www.luogu.com.cn/problem/P2120" target="_blank" rel="noopener">ZJOI 2007 仓库建设</a></h1><h2 id="题意自理"><a href="#题意自理" class="headerlink" title="题意自理"></a>题意自理</h2><h2 id="题解：斜率优化"><a href="#题解：斜率优化" class="headerlink" title="题解：斜率优化"></a>题解：斜率优化</h2><p>设 $s_i$ 为 $p_i\cdot x_i$ 的前缀和， $cnt_i$ 为 $p_i$ 的前缀和 ， $f_i$ 为在 $i$ 点建仓的最小代价，其余均为题目中的含义。</p>
<p>转移方程 $i\to j$ : $f_j = f_i + s_i - s_j + (cnt_j-cnt_i)\cdot d_j$</p>
<p>对于 $i\leq j\leq k$ ，当前要在 $k$ 点建厂，假设从 $j$ 点转移过来比 $i$ 点转移更优，则<br>$f_i-s_k+s_i+(cnt_k-cnt_i)\cdot d_k + c_k &gt; f_j-s_k+s_j+(cnt_k-cnt_j)\cdot d_k + c_k$<br>整理得到 $\frac{f_i-f_j+s_i-s_j}{cnt_i-cnt_j}&gt;x_k$</p>
<p>以 $ (cnt_i, f_i+s_i)$ 为坐标维护一个上凸包转移即可</p>
<h1 id="HDU-3507-Print-Article"><a href="#HDU-3507-Print-Article" class="headerlink" title="HDU 3507 Print Article"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3507" target="_blank" rel="noopener">HDU 3507 Print Article</a></h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定一个数列 $\{C_i\}$ 和一个数字 $M$，将其分为若干段，使得 $\sum((\sum_iC_i^2)+M)$ 最小</p>
<h2 id="题解：斜率优化-1"><a href="#题解：斜率优化-1" class="headerlink" title="题解：斜率优化"></a>题解：斜率优化</h2><p>$f_i$ 为规划到第 $i$ 个数字为止的最小花费，$s_i$ 为前缀和</p>
<p>从第 $i$ 个数字转移到第 $j$ 个数字有 $f_j = f_i + (s_j - s_i)^2+M$</p>
<p>则最小花费为 $f_j = \min_{i&lt;j}(f_i+(s_j - s_i)^2+M)$</p>
<p>令 $i&lt;j&lt;k$ ，若此时要转移到 $k$ 点，$j$ 比 $i$ 更优，则有</p>
<p>$f_i+(s_k-s_i)^2+M&lt;f_j+(s_k-s_j)^2+M$</p>
<p>整理得到 $\frac{(f_i+s_i^2)-(f_j+s_j^2)}{2(s_i-s_j)}&lt;s_k$</p>
<p>由于 $s_i$ 单增，因此我们维护一个下凸包，以 $s_i$为横坐标， $f_i+s_i^2$ 为纵坐标，每次找到那个最优决策点即可</p>
<h1 id="NOI-2016-国王饮水记"><a href="#NOI-2016-国王饮水记" class="headerlink" title="NOI 2016 国王饮水记"></a><a href="https://uoj.ac/problem/223" target="_blank" rel="noopener">NOI 2016 国王饮水记</a></h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>有 $n\leq 8000$ 个水桶，存水量互不相同，每次可以选若干个水桶，将其水量均分，问在 $k\leq 10^9$ 次操作之后，第一个桶里最多有多少水，结果保留 $p\leq 3000$ 位小数。</p>
<h2 id="题解：贪心-动态规划-斜率优化"><a href="#题解：贪心-动态规划-斜率优化" class="headerlink" title="题解：贪心+动态规划+斜率优化"></a>题解：贪心+动态规划+斜率优化</h2><hr>
<p>① 水位低于第一个桶里的水的桶都没用。</p>
<blockquote>
<p>显然</p>
</blockquote>
<hr>
<p>②每次与第一个水桶均分的水位是单调递增的。</p>
<blockquote>
<p>首先举个极端的例子感性理解一下：1 2 5，如果1和5先混2就没作用了</p>
<p>然后理性证明，$s_i$ 为第 $i$ 次混合的水位之和， $c_i$ 为第 $i$ 次混合的水桶数<br>现在有 $s_1&lt;s_2&lt;s_3$ ， $s_1$ 为第一桶水的水位<br>从小到大混合结果为 $\frac{\frac{s_1+s_2}{1+c_2}+s_3}{1+c_3}$<br>从大到小混合结果为 $\frac{\frac{s_1+s_3}{1+c_3}+s_2}{1+c_2}$<br>比较一下就会发现从小到大混合更优</p>
</blockquote>
<hr>
<p>通过这两个性质可以得到 $O(n^2kp)$ 的解法，没错这个高精度小数复杂度非常恐怖</p>
<hr>
<p>③最终选择的结果除第一个桶之外，必然为连续到末尾的一段</p>
<blockquote>
<p>如果当中存在某一个桶不选的话，那么这个桶左边的决策整体右移一格必然更优</p>
</blockquote>
<hr>
<p>根据这个性质我们写一下转移方程<br>$f_{i,j}$ 表示以第 $i$ 个点作为第 $j$ 个决策的终点时的最优结果<br>则 $f_{i,k}=max_{j&lt;i}\frac{f_{j,k-1}+s_i-s_j}{i - j + 1}$ ， 其中 $s_i$ 为前缀和<br>以 $j$ 作为横坐标 ， $-f_{j,k-1}+s_j$ 作为纵坐标，这个决策便有了单调性，维护一个下凸包即可将复杂度优化到 $O(nkp)$</p>
<blockquote>
<p>关于这个单调性成立的原因：<br>注意到上式中的格式并不工整，但我们在决策时以 $(i+1,s_i)$ 作为决策点的坐标，做决策相当于是过这个决策点作凸包切线，当我们维护一个凸包时，显然切线唯一（切点就不知道了）。因此我们只需要使凸包维护时每个点格式工整，决策点与被转移点能够利用单调性即可。</p>
</blockquote>
<hr>
<p>但是这样仍然无法得到满分，需要利用到题解里的一个不等式优化，这个优化的结论是转移过程中整段的转移（选择桶的个数超过2个的转移）不超过14个，其余均为单个桶的转移，证明可以翻翻官方题解。最终复杂度 $O(nplogn)$</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><h2 id="HDU3507-Print-Article"><a href="#HDU3507-Print-Article" class="headerlink" title="HDU3507 Print Article"></a>HDU3507 Print Article</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EP emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">5e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o; <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>), c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li A[MAXN], sum[MAXN], f[MAXN];</span><br><span class="line"><span class="keyword">int</span> Q[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Judge</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, li nsum)</span></span>&#123;<span class="keyword">return</span> <span class="number">1.0</span> * (f[j] - f[i] + sum[j] * sum[j] - sum[i] * sum[i]) &lt;= nsum * (sum[j] - sum[i]);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">li <span class="title">UP</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;<span class="keyword">return</span> (f[j] - f[i] + sum[j] * sum[j] - sum[i] * sum[i]);&#125;</span><br><span class="line"><span class="function">li <span class="title">DOWN</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;<span class="keyword">return</span> sum[j] - sum[i];&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">JU2</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UP(i, j) * DOWN(j, k) &gt;= UP(j, k) * DOWN(i, j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("In.txt", "r" ,stdin);</span></span><br><span class="line">    <span class="keyword">int</span> n, m, he, ta;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) != EOF)&#123;</span><br><span class="line">        fore(i, <span class="number">1</span>, n) A[i] = input(), sum[i] = A[i] + sum[i - <span class="number">1</span>];</span><br><span class="line">        Q[he = ta = <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">            <span class="comment">// double k = slope(Q[he], Q[he + 1]);</span></span><br><span class="line">            <span class="keyword">while</span>(he &lt; ta &amp;&amp; Judge(Q[he], Q[he + <span class="number">1</span>], sum[i] * <span class="number">2</span>)) he++;</span><br><span class="line">            <span class="keyword">int</span> j = Q[he];</span><br><span class="line">            f[i] = f[j] + (sum[i] - sum[j]) * (sum[i] - sum[j]) + m;</span><br><span class="line">            <span class="keyword">while</span>(he &lt; ta &amp;&amp; JU2(Q[ta - <span class="number">1</span>], Q[ta], i)) ta--;</span><br><span class="line">            Q[++ta] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, f[n]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="NOI2016-国王饮水记-不含高精度模板"><a href="#NOI2016-国王饮水记-不含高精度模板" class="headerlink" title="NOI2016 国王饮水记(不含高精度模板)"></a>NOI2016 国王饮水记(不含高精度模板)</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pdd pair<span class="meta-string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pdi pair<span class="meta-string">&lt;double, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">8e3</span> + <span class="number">5</span>, MAXK = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o; <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>), c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> A[MAXN], pre[MAXN][MAXK], Q[MAXN], s[MAXN];</span><br><span class="line"><span class="keyword">double</span> f[MAXN][MAXK];</span><br><span class="line">pdd t[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">slope</span><span class="params">(pdd A, pdd B)</span></span>&#123;<span class="keyword">return</span> (A.fi - B.fi) / (A.se - B.se);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Decimal <span class="title">Solve</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> nk)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(nk == <span class="number">0</span>) <span class="keyword">return</span> A[<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> (Solve(pre[pos][nk], nk - <span class="number">1</span>) + s[pos] - s[pre[pos][nk]])/(pos - pre[pos][nk] + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = input(), k = input(), p = input();</span><br><span class="line">    fore(i, <span class="number">1</span>, n) A[i] = input();</span><br><span class="line">    <span class="keyword">int</span> mk = A[<span class="number">1</span>];</span><br><span class="line">    sort(A + <span class="number">1</span>, A + n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> pos = lower_bound(A + <span class="number">1</span>, A + n + <span class="number">1</span>, mk) - A;</span><br><span class="line">    n = n - pos + <span class="number">1</span>;</span><br><span class="line">    fore(i, <span class="number">1</span>, n) A[i] = A[pos + i - <span class="number">1</span>];</span><br><span class="line">	fore(i, <span class="number">1</span>, n) f[i][<span class="number">0</span>] = A[<span class="number">1</span>], s[i] = s[i - <span class="number">1</span>] + A[i];</span><br><span class="line">	<span class="keyword">int</span> he, ta;</span><br><span class="line">	pdd tp;</span><br><span class="line">	k = min(k, n); <span class="keyword">int</span> lim = min(<span class="number">14</span>, k), m = n - k + lim;</span><br><span class="line">	fore(nk, <span class="number">1</span>, lim)&#123;</span><br><span class="line">		Q[he = ta = <span class="number">1</span>] = nk;</span><br><span class="line">		fore(i, nk, n) t[i] = MP(s[i] - f[i][nk - <span class="number">1</span>], i - <span class="number">1</span>);</span><br><span class="line">		fore(i, nk + <span class="number">1</span>, n)&#123;</span><br><span class="line">			tp = MP(s[i], i);</span><br><span class="line">			<span class="keyword">while</span>(he &lt; ta &amp;&amp; slope(t[Q[he]], tp) &lt; slope(t[Q[he + <span class="number">1</span>]], tp)) he++;</span><br><span class="line">			f[i][nk] = slope(t[Q[he]], tp);</span><br><span class="line">			<span class="comment">// cout &lt;&lt; i &lt;&lt; " " &lt;&lt; Q[he] &lt;&lt; endl;</span></span><br><span class="line">			pre[i][nk] = Q[he];</span><br><span class="line">			<span class="keyword">while</span>(he &lt; ta &amp;&amp; slope(t[Q[ta]], t[Q[ta - <span class="number">1</span>]]) &gt; slope(t[Q[ta]], t[i])) ta--;</span><br><span class="line">			Q[++ta] = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// cout &lt;&lt; f[1][0] &lt;&lt; " " &lt;&lt; f[2][1] &lt;&lt; endl;</span></span><br><span class="line">	Decimal ans = Decimal(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">double</span> mx = <span class="number">0</span>; pos = <span class="number">0</span>;</span><br><span class="line">	fore(i, <span class="number">0</span>, lim)</span><br><span class="line">		<span class="keyword">if</span>(f[m][i] &gt; mx)</span><br><span class="line">			mx = f[m][i], pos = i;</span><br><span class="line">	ans = Solve(m, pos);</span><br><span class="line">	fore(i, m + <span class="number">1</span>, n)</span><br><span class="line">		ans = (ans + A[i]) / <span class="number">2</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; ans.to_string(p &lt;&lt; <span class="number">1</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ZJOI2007-仓库建设"><a href="#ZJOI2007-仓库建设" class="headerlink" title="ZJOI2007 仓库建设"></a>ZJOI2007 仓库建设</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EP emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o; <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>), c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li x[MAXN], p[MAXN], f[MAXN], s[MAXN], c[MAXN], co[MAXN];</span><br><span class="line"><span class="keyword">int</span> he, ta, Q[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function">li <span class="title">DOWN</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;<span class="keyword">return</span> c[i] - c[j];&#125;</span><br><span class="line"><span class="function">li <span class="title">UP</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;<span class="keyword">return</span> f[i] - f[j] + s[i] - s[j];&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = input();</span><br><span class="line">    fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">        x[i] = input();</span><br><span class="line">        p[i] = input();</span><br><span class="line">        c[i] = c[i - <span class="number">1</span>] + p[i];</span><br><span class="line">        s[i] = s[i - <span class="number">1</span>] + x[i] * p[i];</span><br><span class="line">        co[i] = input();</span><br><span class="line">    &#125;</span><br><span class="line">    Q[he = ta = <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">        <span class="keyword">while</span>(he &lt; ta &amp;&amp; DOWN(Q[he], Q[he + <span class="number">1</span>]) * x[i] &lt; UP(Q[he], Q[he + <span class="number">1</span>])) he++;</span><br><span class="line">        <span class="keyword">int</span> j = Q[he];</span><br><span class="line">        <span class="comment">// cout &lt;&lt; j &lt;&lt; " \n"[i == n];</span></span><br><span class="line">        f[i] = f[j] - s[i] + s[j] + (c[i] - c[j]) * x[i] + co[i];</span><br><span class="line">        <span class="keyword">while</span>(he &lt; ta &amp;&amp; UP(Q[ta - <span class="number">1</span>], Q[ta]) * DOWN(Q[ta], i) &gt; UP(Q[ta], i) * DOWN(Q[ta - <span class="number">1</span>], Q[ta]))ta--;</span><br><span class="line">        Q[++ta] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// fore(i, 1, n) cout &lt;&lt; f[i] &lt;&lt; " \n"[i == n];</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>, f[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/08/2020-%E5%A4%9A%E6%A0%A1-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/02/08/2020-%E5%A4%9A%E6%A0%A1-10/" itemprop="url">2020-多校-10</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-02-08T23:41:02+08:00">
                2021-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%9A%E6%A0%A1-10/" itemprop="url" rel="index">
                    <span itemprop="name">多校-10</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="D-Permutation-Counting"><a href="#D-Permutation-Counting" class="headerlink" title="D.Permutation Counting"></a>D.Permutation Counting</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>对于 1 到 $n$ 的任意一种排列，可以用一个长度为 $n - 1$ 的01数列表示相邻两个数字的关系，0 代表前一个数字小于后一个数字，1则相反。</p>
<p>比如1，2，3，6，4，5，其得到的关系数列为 0，0，0，1，0</p>
<p>现在给你一个长度为 $n-1(n\leq 5000)$ 的01数列，问有多少个长度为 $n$ 的排列满足这个数列</p>
<h2 id="题解：DP"><a href="#题解：DP" class="headerlink" title="题解：DP"></a>题解：DP</h2><p>定一个状态 $dp[i][j]$ ，代表当前填充到第 $i$ 位，填充的数字在剩下的数字中为第 $j$ 大。</p>
<p>$dp[i][j] = \begin{cases}<br>\sum_{k=1}^{j}dp[i][k] &amp; a[i] = 0\\<br>\sum_{k=j+1}^{n-i}dp[i][k] &amp;a[i]=1<br>\end{cases}$</p>
<p>这个转移是我猜的，因为代码不是我写的</p>
<h1 id="E-Tree-Cutting"><a href="#E-Tree-Cutting" class="headerlink" title="E.Tree Cutting"></a>E.Tree Cutting</h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>给一棵树$(n\leq 3\times 10^5)$，现在要删去一些点，使树的直径小于等于 $k\leq 3\times 10^5$，问最少要删去多少点</p>
<h2 id="题解：点分治"><a href="#题解：点分治" class="headerlink" title="题解：点分治"></a>题解：点分治</h2><p>先处理树的重心是一个点的情况（直径是偶数），以每个点作为新树的重心，统计每一层点分治过当前这一层子树的重心的新树中点的数量（正向反向统计一遍），最后取一个最值即可。</p>
<p>考虑树的重心在边上，那么原本的记录在点上的结果现在记录在边上，并且为了不重复计数，我们对每条边仅统计当前子树中深度更浅的那个点的答案。（注意在不同层的点分治中，每条边统计的点可能不一样）</p>
<h1 id="F-Divide-and-Conquer"><a href="#F-Divide-and-Conquer" class="headerlink" title="F.Divide and Conquer"></a>F.Divide and Conquer</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>给 $4k$ 个点，保证任意三个点不共线，求两根直线，将 $4k$ 个点平均分为4部分</p>
<h2 id="题解：二分"><a href="#题解：二分" class="headerlink" title="题解：二分"></a>题解：二分</h2><p>首先随便用一根线吧这些点均分为两部分。</p>
<p>可以确定对于每一部分，对于任何一个截距 $b$，都可以找到一个斜率 $k$ ， 使得 $y=kx+b$ 能够平分这一部分的点，且 $k$ 可以关于 $b$ 单调。</p>
<p>那么我们实际上就是找这两部分能够共用的斜率和截距。 二分一个斜率 $k$ ，验证是否均分成四部分，最后微调即可。</p>
<h1 id="G-Coin-Game"><a href="#G-Coin-Game" class="headerlink" title="G.Coin Game"></a>G.Coin Game</h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>有 $n\leq 5\times 10^6$ 个机器，投入硬币后会产生相应的权值，每台机器最多投入三个硬币，每次产生的权值分别为 $a_i,b_i,a_i(a_i,b_i\leq 10^7)$ 。现在有 $m\leq 1.5\times 10^7$ 个硬币，假设投入 $i$ 枚硬币能得到的最大的权值为 $f(i)$ ，现在要求输出 $\oplus_{i=1}^{n}f(i)$</p>
<h2 id="题解：背包-贪心"><a href="#题解：背包-贪心" class="headerlink" title="题解：背包+贪心"></a>题解：背包+贪心</h2><p>首先这是一个典型的背包问题，正常的递推方程是</p>
<p>$f[i][j] = max_{k=0}^{3}\{f[i - 1][j-k]+cost\}$</p>
<p>其中 $i$ 表示当前使用到第 $i$ 个机器，$j$ 表示使用了 $j$ 个硬币，cost则代表当前机器使用 $k$ 个硬币能够的到的相应的权值。</p>
<p>复杂度 $O(nm)$</p>
<p>现在考虑这个特殊的条件——最多投三枚硬币。</p>
<p>那么我们将投三枚硬币得到的权值分成两份，$a$ 和 $a+b$ ，把它们看作两类不同且相互独立的物品，那么我们每次都只要贪心地找当前能够得到的最大值即可。排序+贪心复杂度 $O(nlogn)$</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><h2 id="D-Permutation-Counting-1"><a href="#D-Permutation-Counting-1" class="headerlink" title="D.Permutation Counting"></a>D.Permutation Counting</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int.int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">9</span>;</span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">ll a[maxn],dp[<span class="number">6000</span>][<span class="number">6000</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i]==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ll sum=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=i;j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    dp[i][j]=sum%mod;</span><br><span class="line">                    sum=(sum+dp[i<span class="number">-1</span>][j])%mod;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ll sum=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=i;j&gt;=<span class="number">1</span>;j--)</span><br><span class="line">                &#123;</span><br><span class="line">                    dp[i][j]=sum%mod;</span><br><span class="line">                    sum=(sum+dp[i<span class="number">-1</span>][j<span class="number">-1</span>])%mod;</span><br><span class="line">                &#125;</span><br><span class="line">               <span class="comment">// cout&lt;&lt;sum;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ll sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            sum=(sum+dp[n][i])%mod;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,sum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="E-Tree-Cutting-1"><a href="#E-Tree-Cutting-1" class="headerlink" title="E.Tree Cutting"></a>E.Tree Cutting</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) (x &amp; (-x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EP emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">3e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> k, nsiz, nrt, cnt_e, res[MAXN], res_e[MAXN], maxsiz[MAXN], siz[MAXN], ex[MAXN];</span><br><span class="line"><span class="built_in">vector</span>&lt;pii&gt; EG[MAXN];</span><br><span class="line"><span class="keyword">bool</span> mk[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FR</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">    siz[u] = <span class="number">1</span>;</span><br><span class="line">    maxsiz[u] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(pii eg : EG[u])&#123;</span><br><span class="line">        <span class="keyword">int</span> v = eg.fi;</span><br><span class="line">        <span class="keyword">if</span>(v != f &amp;&amp; !mk[v])&#123;</span><br><span class="line">            FR(v, u);</span><br><span class="line">            siz[u] += siz[v];</span><br><span class="line">            maxsiz[u] = max(maxsiz[u], siz[v]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    maxsiz[u] = max(maxsiz[u], nsiz - siz[u]);</span><br><span class="line">    <span class="keyword">if</span>(maxsiz[u] &lt; maxsiz[nrt]) nrt = u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tn, cnt[MAXN], ncnt[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="comment">// void Add(int x)&#123;for(; x &lt;= tn; x += lowbit(x)) cnt[x]++;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// int QRY(int x)&#123;</span></span><br><span class="line"><span class="comment">//     if(x &lt; 0) return 0;</span></span><br><span class="line"><span class="comment">//     x = min(x, tn);</span></span><br><span class="line"><span class="comment">//     int ret = 1;</span></span><br><span class="line"><span class="comment">//     for(; x; x -= lowbit(x))</span></span><br><span class="line"><span class="comment">//         ret += cnt[x];</span></span><br><span class="line"><span class="comment">//     return ret;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Cal</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>&#123;</span><br><span class="line">    ncnt[d]++;</span><br><span class="line">    <span class="keyword">if</span>((k &gt;&gt; <span class="number">1</span>) - d &gt;= <span class="number">0</span>) res[u] += cnt[min((k &gt;&gt; <span class="number">1</span>) - d, tn)];</span><br><span class="line">    <span class="keyword">for</span>(pii eg : EG[u])&#123;</span><br><span class="line">        <span class="keyword">int</span> v = eg.fi;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(v != f &amp;&amp; !mk[v])&#123;</span><br><span class="line">            <span class="keyword">if</span>(((k &gt;&gt; <span class="number">1</span>) - d) &gt;= <span class="number">0</span>)res_e[eg.se] += cnt[min((k &gt;&gt; <span class="number">1</span>) - d, tn)];</span><br><span class="line">            <span class="comment">// printf("%d %d %d\n", u, v, cnt[min((k &gt;&gt; 1) - d, tn)]);</span></span><br><span class="line">            Cal(v, u, d + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pro</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; "MK : " &lt;&lt; u &lt;&lt; endl;</span></span><br><span class="line">    mk[u] = <span class="number">1</span>;</span><br><span class="line">    tn = maxsiz[u];</span><br><span class="line">    fill(cnt, cnt + tn + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(pii eg : EG[u])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> v = eg.fi;</span><br><span class="line">        <span class="keyword">if</span>(!mk[v])&#123;</span><br><span class="line">            <span class="keyword">int</span> tsiz = max(tn, siz[v]);</span><br><span class="line">            fill(ncnt, ncnt + tn + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">            Cal(v, u, <span class="number">1</span>);</span><br><span class="line">            fore(i, <span class="number">1</span>, tn)ncnt[i] += ncnt[i - <span class="number">1</span>],cnt[i] += ncnt[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    res[u] += cnt[min(k &gt;&gt; <span class="number">1</span>, tn)];</span><br><span class="line">    <span class="keyword">for</span>(pii eg : EG[u])</span><br><span class="line">        <span class="keyword">if</span>(!mk[eg.fi])</span><br><span class="line">            res_e[eg.se] += cnt[min(k &gt;&gt; <span class="number">1</span>, tn)];</span><br><span class="line">    fill(cnt, cnt + tn + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = EG[u].size() - <span class="number">1</span>, v; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">if</span>(!mk[v = EG[u][i].fi])&#123;</span><br><span class="line">            <span class="keyword">int</span> tsiz = max(tn, siz[v]);</span><br><span class="line">            fill(ncnt, ncnt + tn + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">            Cal(v, u, <span class="number">1</span>);</span><br><span class="line">            fore(i, <span class="number">1</span>, tn)</span><br><span class="line">                ncnt[i] += ncnt[i - <span class="number">1</span>],</span><br><span class="line">                cnt[i] += ncnt[i];</span><br><span class="line">            <span class="comment">// cout &lt;&lt; "RES " &lt;&lt; u &lt;&lt; " " &lt;&lt; v &lt;&lt; " " &lt;&lt; res_e[EG[u][i].se] &lt;&lt; " ";</span></span><br><span class="line">            res_e[EG[u][i].se] += - ncnt[min(tn, k &gt;&gt; <span class="number">1</span>)] + ncnt[min(tn, (k + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>)];</span><br><span class="line">            <span class="comment">// cout &lt;&lt; res_e[EG[u][i].se] &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">int</span> mksiz = nsiz;</span><br><span class="line">    <span class="keyword">for</span>(pii eg : EG[u])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> v = eg.fi;</span><br><span class="line">        <span class="keyword">if</span>(!mk[v])&#123;</span><br><span class="line">            nsiz = siz[v] &gt; siz[u] ? mksiz - siz[u] : siz[v];</span><br><span class="line">            nrt = <span class="number">0</span>;</span><br><span class="line">            FR(v, u);</span><br><span class="line">            Pro(nrt);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("In.txt", "r" ,stdin);</span></span><br><span class="line">    maxsiz[<span class="number">0</span>] = <span class="number">1e9</span> + <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">int</span> T = input();</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        <span class="keyword">int</span> n = input(), u, v;</span><br><span class="line">        k = input();</span><br><span class="line">        cnt_e = <span class="number">0</span>;</span><br><span class="line">        fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">            EG[i].clear();</span><br><span class="line">            res[i] = <span class="number">0</span>;</span><br><span class="line">            res_e[i] = <span class="number">0</span>;</span><br><span class="line">            mk[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">            u = input(); v = input();</span><br><span class="line">            EG[u].EP(v, ++cnt_e); EG[v].EP(u, cnt_e);</span><br><span class="line">        &#125;</span><br><span class="line">        nsiz = n; nrt = <span class="number">0</span>;</span><br><span class="line">        FR(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        Pro(nrt);</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1e9</span> + <span class="number">5</span>;</span><br><span class="line">        <span class="comment">// fore(i, 1, n) cout &lt;&lt; i &lt;&lt; " " &lt;&lt; res[i] &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(k &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            fore(i, <span class="number">1</span>, n - <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">if</span>(n - res_e[i] &lt; ans) ans = n - res_e[i];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            fore(i, <span class="number">1</span>, n)</span><br><span class="line">                <span class="keyword">if</span>(n - res[i] &lt; ans) ans = n - res[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="F-Divide-and-Conquer-1"><a href="#F-Divide-and-Conquer-1" class="headerlink" title="F.Divide and Conquer"></a>F.Divide and Conquer</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> o; <span class="keyword">char</span> c = getchar(); <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>),</span><br><span class="line">        c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">3</span>)+(o &lt;&lt; <span class="number">1</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">5e4</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-8</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y; <span class="keyword">double</span> r; <span class="keyword">bool</span> mk;</span><br><span class="line">    Node()&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inp</span><span class="params">()</span></span>&#123;x = input(); y = input();&#125;</span><br><span class="line">&#125; node[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> ang;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Cal</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fore(i, <span class="number">1</span>, n) node[i].r = -<span class="built_in">sin</span>(ang) * node[i].x + <span class="built_in">cos</span>(ang) * node[i].y;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; ang &lt;&lt; " " &lt;&lt; sin(ang) &lt;&lt; " "&lt;&lt; cos(ang) &lt;&lt; endl;</span></span><br><span class="line">    sort(node + <span class="number">1</span>, node + n + <span class="number">1</span>, [](Node &amp;a, Node &amp;b)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(a.r - b.r) &gt; eps) <span class="keyword">return</span> a.r &lt; b.r;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(a.x == b.x) <span class="keyword">return</span> a.y &lt; b.y;</span><br><span class="line">            <span class="keyword">return</span> a.x &lt; b.x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("In.txt", "r", stdin);</span></span><br><span class="line">    <span class="keyword">int</span> T = input();</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        n = input();</span><br><span class="line">        fore(i, <span class="number">1</span>, n) node[i].inp();</span><br><span class="line">        ang = <span class="number">0</span>;</span><br><span class="line">        Cal();</span><br><span class="line">        fore(i, <span class="number">1</span>, n &gt;&gt; <span class="number">1</span>)</span><br><span class="line">            node[i].mk = <span class="number">1</span>;</span><br><span class="line">        fore(i, n &gt;&gt; <span class="number">1</span> | <span class="number">1</span>, n)</span><br><span class="line">            node[i].mk = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> hn = n &gt;&gt; <span class="number">1</span>, y = (node[hn].y + node[hn | <span class="number">1</span>].y + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d %d\n"</span>, node[hn].x - <span class="number">100000000</span>, y + ((node[hn].y==node[hn|<span class="number">1</span>].y)), node[hn + <span class="number">1</span>].x + <span class="number">100000000</span>, (y - <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">double</span> l = <span class="number">0</span>, r = <span class="built_in">acos</span>(<span class="number">-1</span>), mid;</span><br><span class="line">        <span class="keyword">int</span> cnt;</span><br><span class="line">        fore(i, <span class="number">1</span>, <span class="number">200</span>)&#123;</span><br><span class="line">            ang = mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">            Cal();</span><br><span class="line">            cnt = <span class="number">0</span>;</span><br><span class="line">            fore(j, <span class="number">1</span>, hn)</span><br><span class="line">                cnt += node[j].mk;</span><br><span class="line">            <span class="keyword">if</span>(cnt == (hn &gt;&gt; <span class="number">1</span>)) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(cnt &gt; (hn &gt;&gt; <span class="number">1</span>)) l = mid;</span><br><span class="line">            <span class="keyword">else</span> r = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> nx = (node[hn].x + node[hn + <span class="number">1</span>].x) * <span class="number">0.5</span>,</span><br><span class="line">                ny = (node[hn].y + node[hn + <span class="number">1</span>].y) * <span class="number">0.5</span>;</span><br><span class="line">        ang += <span class="number">1e-7</span> * ((nx &lt; node[hn].x) || (nx == node[hn].x &amp;&amp; ny &lt; node[hn].y) ? <span class="number">1</span> : <span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d %d\n"</span>, <span class="keyword">int</span>(nx - <span class="number">1e8</span> * <span class="built_in">cos</span>(ang)), <span class="keyword">int</span>(ny - <span class="number">1e8</span> * <span class="built_in">sin</span>(ang)), <span class="keyword">int</span>(nx + <span class="number">1e8</span> * <span class="built_in">cos</span>(ang)), <span class="keyword">int</span>(ny + <span class="number">1e8</span> * <span class="built_in">sin</span>(ang)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="G-Coin-Game-1"><a href="#G-Coin-Game-1" class="headerlink" title="G.Coin Game"></a>G.Coin Game</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EP emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> uli unsigned long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> threshold = <span class="number">10000000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">5e6</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o; <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>), c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uli k1, k2;</span><br><span class="line"></span><br><span class="line"><span class="function">uli <span class="title">XOR</span><span class="params">()</span></span>&#123;</span><br><span class="line">    uli k3 = k1, k4 = k2;</span><br><span class="line">    k1 = k4;</span><br><span class="line">    k3 ^= (k3 &lt;&lt; <span class="number">23</span>);</span><br><span class="line">    k2 = k3 ^ k4 ^ (k3 &gt;&gt; <span class="number">17</span>) ^ (k4 &gt;&gt; <span class="number">26</span>);</span><br><span class="line">    <span class="keyword">return</span> k2 + k4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[MAXN], b[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gen</span><span class="params">(<span class="keyword">int</span> n, uli _k1, uli _k2)</span></span>&#123;</span><br><span class="line">    k1 = _k1, k2 = _k2;</span><br><span class="line">    fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">        a[i] = XOR() % threshold + <span class="number">1</span>;</span><br><span class="line">        b[i] = XOR() % threshold + <span class="number">1</span> + a[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    uli _k1, _k2;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%llu%llu"</span>, &amp;n, &amp;m, &amp;_k1, &amp;_k2) != EOF)&#123;</span><br><span class="line">        gen(n, _k1, _k2);</span><br><span class="line">        sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>);</span><br><span class="line">        sort(b + <span class="number">1</span>, b + n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> ta = n, tb = n;</span><br><span class="line">        li res = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">        fore(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">            <span class="keyword">if</span>((ta == n) || (tb == <span class="number">0</span>))&#123;</span><br><span class="line">                sum += a[ta];</span><br><span class="line">                ta--;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ta == <span class="number">0</span>) sum += b[tb] - a[++ta];</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(a[ta] + a[ta + <span class="number">1</span>] &lt; b[tb])&#123;</span><br><span class="line">                    ta++;</span><br><span class="line">                    sum += b[tb] - a[ta];</span><br><span class="line">                    tb--;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    sum += a[ta];</span><br><span class="line">                    ta--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res ^= sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/07/WQS%E4%BA%8C%E5%88%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/02/07/WQS%E4%BA%8C%E5%88%86/" itemprop="url">WQS二分</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-02-07T15:40:18+08:00">
                2021-02-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BB%83%E4%B9%A0%E9%A2%98%E9%9B%86/" itemprop="url" rel="index">
                    <span itemprop="name">练习题集</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="CF739E-Gosha-is-hunting"><a href="#CF739E-Gosha-is-hunting" class="headerlink" title="CF739E.Gosha is hunting"></a><a href>CF739E.Gosha is hunting</a></h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>有 $n$ 只宝可梦，你手头有 $a$ 个普通球， $b$ 个橡木球，当使用普通球捕获第 $i$ 只宝可梦时概率为 $p_i$ ，用橡木球捕获第 $i$ 只宝可梦的时候概率为 $q_i$ 。你可以对某只宝可梦丢普通球或橡木球，也可以同时使用两个不同种类的球。现在希望规划好所有的球使用的对象，要求让捕获到的宝可梦的数量的期望最大。问最大期望是多少。其中 $1\leq a,b\leq n\leq 10^4$。</p>
<h2 id="题解：二分套二分-WQS二分-网络流"><a href="#题解：二分套二分-WQS二分-网络流" class="headerlink" title="题解：二分套二分+WQS二分/网络流"></a>题解：二分套二分+WQS二分/网络流</h2><h3 id="二分套二分-WQS二分"><a href="#二分套二分-WQS二分" class="headerlink" title="二分套二分+WQS二分"></a>二分套二分+WQS二分</h3><p>以 $dp[n][a][b]$ 为状态进行转移复杂度为 $O(nab)$ ，显然太大了</p>
<p>观察一下</p>
<p>以 $a/b$ 为横坐标， 期望和为纵坐标，能够得到一个凸函数。</p>
<p>WQS二分一个斜率（额外代价）即可消除其中一维 $O(a)/O(b)$ 的复杂度，代价是二分的复杂度 $O(T)$</p>
<p>但是当这个情况到二维之后我们该如何考虑呢？</p>
<h4 id="首先观察一下两种球之间的影响。"><a href="#首先观察一下两种球之间的影响。" class="headerlink" title="首先观察一下两种球之间的影响。"></a>首先观察一下两种球之间的影响。</h4><p>$<br>dp[i] = \begin{cases}<br>dp[i - 1] + p_i &amp; Poke-Ball\\<br>dp[i - 1] + u_i &amp; Ultra-Ball\\<br>dp[i - 1] + p_i + u_i - p_iu_i &amp; Both\\<br>\end{cases}<br>$</p>
<p>将这个拓展到二维平面后，他也一定是一个二维的凸包，两个斜率出来之后相当于用一个斜的平面去切凸包，最终切到那个正好的点。</p>
<h3 id="网络流"><a href="#网络流" class="headerlink" title="网络流"></a>网络流</h3><p>设两个源点，代表两种精灵球，每个精灵从两个源点连两条边，代价为 $-p_i$ 和 $-u_i$ ，连两条边道汇点，一条 $0$ ，一条 $p_iq_i$，跑最小费用最大流。</p>
<h1 id="luogu-P5308-COCI2019-Quiz"><a href="#luogu-P5308-COCI2019-Quiz" class="headerlink" title="[luogu P5308][COCI2019]Quiz"></a><a href="https://www.luogu.com.cn/problem/P5308" target="_blank" rel="noopener">[luogu P5308][COCI2019]Quiz</a></h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>你面临 $n\leq 10^5$ 名参赛者的挑战，最终要将他们全部战胜。<br>每一轮中，都会淘汰一些选手；你会得到这一轮奖金池中 被淘汰者 除以 这一轮对手总数 比例的奖金。</p>
<p>例如某一轮有 10 个对手，淘汰了 3 个，那么你将获得奖金池中 3/10 的奖金。</p>
<p>假设每一轮的奖金池均为一元，<code>Mirko</code> 希望通过恰好 $k\leq n$ 轮赢得比赛，那么他最多可能获得多少奖金呢？</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><h3 id="一般对于这种跨区间且区间长度无限制的转移，都会有一个斜率优化。"><a href="#一般对于这种跨区间且区间长度无限制的转移，都会有一个斜率优化。" class="headerlink" title="一般对于这种跨区间且区间长度无限制的转移，都会有一个斜率优化。"></a>一般对于这种跨区间且区间长度无限制的转移，都会有一个斜率优化。</h3><h4 id="首先不考虑-k-轮的限制条件"><a href="#首先不考虑-k-轮的限制条件" class="headerlink" title="首先不考虑 $k$ 轮的限制条件"></a>首先不考虑 $k$ 轮的限制条件</h4><p>首先我们确定一个转移方向，反向从小向大转移。若此时是从 $i$ 转移到 $j(j\leq i)$ ，那么得到的贡献为 $f[j] = f[i] + \frac{j-i}{j}$</p>
<p>那么对于 $i\leq j\leq k$ ，转移到 $k$ 时若 $j$ 比 $i$ 更优，则应有 $f[i]+\frac{k-i}{k} &lt; f[j] + \frac{k-j}{k}$</p>
<p>移项得到 $\frac{f[i]-f[j]}{i-j}&lt;\frac{1}{k}$</p>
<p>根据这个不等式，我们可以维护一个单调递减队列：<br>每次讨论新的转移时弹出队首直至队首位最优转移点；<br>将元素加入队尾时同样需要满足单调性；</p>
<h4 id="然后加上-k-轮的限制条件"><a href="#然后加上-k-轮的限制条件" class="headerlink" title="然后加上 $k$ 轮的限制条件"></a>然后加上 $k$ 轮的限制条件</h4><p>由于维护的是一个凸包，因此WQS二分即可</p>
<p><strong>注意：由于最终是轮数满足要求，因此在转移时需要记录当前转移的游戏轮数</strong></p>
<h1 id="ICPC-2018-南京-B-Tournament"><a href="#ICPC-2018-南京-B-Tournament" class="headerlink" title="ICPC-2018-南京 B.Tournament"></a>ICPC-2018-南京 B.Tournament</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>在一条直线上分布着 $n\leq3\times 10^5$ 个点 ，每个点的坐标为 $a_i\in[0,10^9]$ 。</p>
<p>现在要设立 $k(1\leq k\leq n)$ 个关键点，使得 $n$ 个点到离它最近的关键点的距离之和最小，问这个最小距离为多少。</p>
<h2 id="题解：二分套WQS二分"><a href="#题解：二分套WQS二分" class="headerlink" title="题解：二分套WQS二分"></a>题解：二分套WQS二分</h2><p>首先我们可以通过预处理前缀和和前缀前缀和来 $O(1)$ 求在一个区间设置一个关键点的最小距离和（显然是设在中间点最优）</p>
<p>其次我们来讨论转移，但是对于这道题，转移的方式很重要。</p>
<p>在没有 $k$ 的限制的条件下，显然每个点都是关键点的时候是最优的——据此，我们可以想象一下以 $k$ 为 $x$ 轴 ，$f(k)$ （每个点到与其距离最近的关键点的距离之和在只有 $k$ 个关键点的前提下的小值） 为 $y$ 轴的线，它是一个单调递减的凸包。此时它的极小值点为 $x=n$ 。</p>
<p>但是按照题目的要求，我们希望得到极值点为 $x=k$ 的线，此时使用WQS二分将图像尾部抬起来，维护一个单调递减的单调队列即可。</p>
<p>在这个条件下，我们以第 $i$ 个点作为区间的起点作为转移对象，讨论一下如何维护这个单调队列：</p>
<p>1、首先我们只需要维护可以转移到当前区间的区间，即区间右端点在 $i$ 及其右侧的区间（两个区间至少要相切），因此弹出队首的右端点在 $i$ 的左侧的点。弹出后用队首元素转移 $i$ 点的信息。</p>
<p>2、其次讨论如何弹出队尾元素：以 $i$ 作为区间终点，讨论队尾元素作为区间起点的情况，若 $Q[tail - 1]$ 比 $Q[tail]$ 更优，则弹出队尾元素，因为在之后的任何情况下从 $Q[tail]$ 转移都不可能比 $Q[tail - 1]$ 更优了。</p>
<p>最后分别以更新过的 $Q[tail]$ 和 $i$ 作为区间起点，讨论以 $i$ 作为区间起点的最优区间终点，而后将 $i$ 加入栈尾。</p>
<h1 id="【luogu-P2619】-国家集训队2-Tree-I"><a href="#【luogu-P2619】-国家集训队2-Tree-I" class="headerlink" title="【luogu P2619】[国家集训队2]Tree I"></a><a href="https://www.luogu.com.cn/problem/P2619" target="_blank" rel="noopener">【luogu P2619】[国家集训队2]Tree I</a></h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>给你一个无向带权连通图，每条边是黑色或白色。让你求一棵最小权的恰好有 $need$ 条白色边的生成树。</p>
<p>题目保证有解。</p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>WQS的实质是通过增加/减少单个决策点的权值使得原本可选的最优解变得不可选。</p>
<p>对这道题而言同理，通过二分增加白色边的权值，使得原本在最小生成树中的某些白色边不可选即可。</p>
<h2 id="【luoguP3620】-APIO-CTSC-2007-数据备份"><a href="#【luoguP3620】-APIO-CTSC-2007-数据备份" class="headerlink" title="【luoguP3620】[APIO/CTSC 2007]数据备份"></a><a href="https://www.luogu.com.cn/problem/P3620" target="_blank" rel="noopener">【luoguP3620】[APIO/CTSC 2007]数据备份</a></h2><h2 id="题意-4"><a href="#题意-4" class="headerlink" title="题意"></a>题意</h2><p>$n$ 个办公楼排成一条直线，给出距离最开始的距离</p>
<p>选择 $k$ 对办公楼，使得 $k$ 对办公楼每对之间的距离和最小</p>
<h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2><p>二分结果中配对的办公楼之间的最大距离，WQS二分验证即可</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><h2 id="CF739E-Gosha-is-hunting-1"><a href="#CF739E-Gosha-is-hunting-1" class="headerlink" title="CF739E.Gosha is hunting"></a>CF739E.Gosha is hunting</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EP emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-8</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o; <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>), c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> pa[MAXN], pb[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, ca[MAXN], cb[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Solve</span><span class="params">(<span class="keyword">double</span> ta, <span class="keyword">double</span> tb)</span></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> res = <span class="number">0</span>, temp;</span><br><span class="line">    fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">        temp = <span class="number">0</span>;</span><br><span class="line">        ca[i] = ca[i - <span class="number">1</span>]; cb[i] = cb[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(pa[i] - ta &gt; temp)</span><br><span class="line">            temp = pa[i] - ta,</span><br><span class="line">            ca[i] = ca[i - <span class="number">1</span>] + <span class="number">1</span>,</span><br><span class="line">            cb[i] = cb[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(pb[i] - tb &gt; temp + eps)</span><br><span class="line">            temp = pb[i] - tb,</span><br><span class="line">            ca[i] = ca[i - <span class="number">1</span>],</span><br><span class="line">            cb[i] = cb[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(pa[i] + pb[i] - pa[i] * pb[i] - ta - tb &gt; temp + eps)</span><br><span class="line">            temp = pa[i] + pb[i] - pa[i] * pb[i] - ta - tb,</span><br><span class="line">            ca[i] = ca[i - <span class="number">1</span>] + <span class="number">1</span>,</span><br><span class="line">            cb[i] = cb[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        res += temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("In.txt", "r", stdin);</span></span><br><span class="line">    ios_base::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> A, B;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; A &gt;&gt; B;</span><br><span class="line">    fore(i, <span class="number">1</span>, n) <span class="built_in">cin</span> &gt;&gt; pa[i];</span><br><span class="line">    fore(i, <span class="number">1</span>, n) <span class="built_in">cin</span> &gt;&gt; pb[i];</span><br><span class="line">    <span class="keyword">double</span> resa, resb, lb, rb, mb, la = <span class="number">0</span>, ra = <span class="number">1</span>, ma;</span><br><span class="line">    <span class="keyword">while</span>(la + eps &lt; ra)&#123;</span><br><span class="line">        ma = (la + ra) * <span class="number">0.5</span>;</span><br><span class="line">        lb = <span class="number">0</span>, rb = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(lb + eps &lt; rb)&#123;</span><br><span class="line">            mb = (lb + rb) * <span class="number">0.5</span>;</span><br><span class="line">            Solve(ma, mb);</span><br><span class="line">            <span class="keyword">if</span>(cb[n] &gt; B) lb = mb;</span><br><span class="line">            <span class="keyword">else</span> rb = mb;</span><br><span class="line">        &#125;</span><br><span class="line">        Solve(ma, rb);</span><br><span class="line">        <span class="keyword">if</span>(ca[n] &gt; A) la = ma;</span><br><span class="line">        <span class="keyword">else</span> ra = ma;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> res = Solve(ra, rb) + A * ra + B * rb;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="luoguP5308-Quiz"><a href="#luoguP5308-Quiz" class="headerlink" title="[luoguP5308]Quiz"></a>[luoguP5308]Quiz</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EP emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-8</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o; <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>), c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> pa[MAXN], pb[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, ca[MAXN], cb[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Solve</span><span class="params">(<span class="keyword">double</span> ta, <span class="keyword">double</span> tb)</span></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> res = <span class="number">0</span>, temp;</span><br><span class="line">    fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">        temp = <span class="number">0</span>;</span><br><span class="line">        ca[i] = ca[i - <span class="number">1</span>]; cb[i] = cb[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(pa[i] - ta &gt; temp)</span><br><span class="line">            temp = pa[i] - ta,</span><br><span class="line">            ca[i] = ca[i - <span class="number">1</span>] + <span class="number">1</span>,</span><br><span class="line">            cb[i] = cb[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(pb[i] - tb &gt; temp + eps)</span><br><span class="line">            temp = pb[i] - tb,</span><br><span class="line">            ca[i] = ca[i - <span class="number">1</span>],</span><br><span class="line">            cb[i] = cb[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(pa[i] + pb[i] - pa[i] * pb[i] - ta - tb &gt; temp + eps)</span><br><span class="line">            temp = pa[i] + pb[i] - pa[i] * pb[i] - ta - tb,</span><br><span class="line">            ca[i] = ca[i - <span class="number">1</span>] + <span class="number">1</span>,</span><br><span class="line">            cb[i] = cb[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        res += temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("In.txt", "r", stdin);</span></span><br><span class="line">    ios_base::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> A, B;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; A &gt;&gt; B;</span><br><span class="line">    fore(i, <span class="number">1</span>, n) <span class="built_in">cin</span> &gt;&gt; pa[i];</span><br><span class="line">    fore(i, <span class="number">1</span>, n) <span class="built_in">cin</span> &gt;&gt; pb[i];</span><br><span class="line">    <span class="keyword">double</span> resa, resb, lb, rb, mb, la = <span class="number">0</span>, ra = <span class="number">1</span>, ma;</span><br><span class="line">    <span class="keyword">while</span>(la + eps &lt; ra)&#123;</span><br><span class="line">        ma = (la + ra) * <span class="number">0.5</span>;</span><br><span class="line">        lb = <span class="number">0</span>, rb = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(lb + eps &lt; rb)&#123;</span><br><span class="line">            mb = (lb + rb) * <span class="number">0.5</span>;</span><br><span class="line">            Solve(ma, mb);</span><br><span class="line">            <span class="keyword">if</span>(cb[n] &gt; B) lb = mb;</span><br><span class="line">            <span class="keyword">else</span> rb = mb;</span><br><span class="line">        &#125;</span><br><span class="line">        Solve(ma, rb);</span><br><span class="line">        <span class="keyword">if</span>(ca[n] &gt; A) la = ma;</span><br><span class="line">        <span class="keyword">else</span> ra = ma;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> res = Solve(ra, rb) + A * ra + B * rb;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ICPC-2018-南京-B-Tournament-1"><a href="#ICPC-2018-南京-B-Tournament-1" class="headerlink" title="ICPC-2018-南京 B.Tournament"></a>ICPC-2018-南京 B.Tournament</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">3e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li A[MAXN], S[MAXN], dp[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, k, cnt[MAXN], Le[MAXN], Ri[MAXN], Q[MAXN], he, ta;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Solve</span><span class="params">(li ex)</span></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> Cal = [&amp;](<span class="keyword">int</span> l, <span class="keyword">int</span> r)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; S[r] - S[mid] - (S[mid] - S[l - 1]) + A[mid] * (mid+mid-l-r+1) &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">return</span> S[r] - S[mid] - (S[mid] - S[l - <span class="number">1</span>]) + A[mid] * (mid+mid-l-r+<span class="number">1</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> calc = [&amp;](<span class="keyword">int</span> x, <span class="keyword">int</span> r)&#123;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; x &lt;&lt; " " &lt;&lt; r &lt;&lt; " " &lt;&lt; dp[x] + Cal(x + 1, r) + ex &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">return</span> dp[x] + Cal(x + <span class="number">1</span>, r) + ex;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> Check = [&amp;](<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> r)&#123;</span><br><span class="line">        li v1 = calc(x, r), v2 = calc(y, r);</span><br><span class="line">        <span class="keyword">if</span>(v1 == v2) <span class="keyword">return</span> cnt[x] &lt; cnt[y];</span><br><span class="line">        <span class="keyword">return</span> v1 &lt; v2;</span><br><span class="line">    &#125;;</span><br><span class="line">    he = ta = <span class="number">1</span>;</span><br><span class="line">    Q[<span class="number">1</span>] = dp[<span class="number">0</span>] = <span class="number">0</span>; Le[<span class="number">1</span>] = <span class="number">1</span>; Ri[<span class="number">1</span>] = n; cnt[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">        <span class="keyword">while</span>(he &lt;= ta &amp;&amp; Ri[he] &lt; i)he++;</span><br><span class="line">        dp[i] = calc(Q[he], i);</span><br><span class="line">        <span class="comment">// cout &lt;&lt; dp[i] &lt;&lt; endl;</span></span><br><span class="line">        cnt[i] = cnt[Q[he]] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(he &lt;= ta &amp;&amp; Check(i, Q[ta], Le[ta])) ta--;</span><br><span class="line">        <span class="keyword">int</span> l = Le[ta], r = n, ans = r + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(Check(i, Q[ta], mid)) ans = mid, r = mid - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(l &lt;= n)</span><br><span class="line">            Q[++ta] = i, Le[ta] = ans, Ri[ta] = n, Ri[ta - <span class="number">1</span>] = ans - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    n = input(), k = input();</span><br><span class="line">    fore(i, <span class="number">1</span>, n) A[i] = input(), S[i] = A[i] + S[i - <span class="number">1</span>];</span><br><span class="line">    li L = <span class="number">0</span>, R = S[n], ans;</span><br><span class="line">    <span class="keyword">while</span>(L &lt;= R)&#123;</span><br><span class="line">        li mid = (L + R) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(Solve(mid) &lt;= k) ans = mid, R = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> L = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Solve(ans);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>, dp[n] - L * k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="【luogu-P2619】-国家集训队2-Tree-I-1"><a href="#【luogu-P2619】-国家集训队2-Tree-I-1" class="headerlink" title="【luogu P2619】[国家集训队2]Tree I"></a>【luogu P2619】[国家集训队2]Tree I</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EP emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">5e4</span> + <span class="number">5</span>, MAXM = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o; <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>)</span><br><span class="line">        f |= (c == <span class="string">'-'</span>), c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> f ? -o : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> val, val0, u, v, ty;</span><br><span class="line">    node()&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        u = input() + <span class="number">1</span>; v = input() + <span class="number">1</span>;</span><br><span class="line">        val0 = input(); ty = <span class="number">1</span> - input();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;eg[MAXM];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, k, fa[MAXN], res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Getf</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> fa[x] == x ? x : (fa[x] = Getf(fa[x]));&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Check</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">    fore(i, <span class="number">1</span>, m)</span><br><span class="line">        <span class="keyword">if</span>(eg[i].ty) eg[i].val = eg[i].val0 + a;</span><br><span class="line">        <span class="keyword">else</span> eg[i].val = eg[i].val0;</span><br><span class="line">    sort(eg + <span class="number">1</span>, eg + m + <span class="number">1</span>, [](node a, node b)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a.val != b.val)<span class="keyword">return</span> a.val &lt; b.val;</span><br><span class="line">        <span class="keyword">return</span> a.ty &gt; b.ty;</span><br><span class="line">    &#125;);</span><br><span class="line">    fore(i, <span class="number">1</span>, n) fa[i] = i;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>; res = <span class="number">0</span>;</span><br><span class="line">    fore(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">        <span class="keyword">int</span> fx = Getf(eg[i].u), fy = Getf(eg[i].v);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy)&#123;</span><br><span class="line">            res += eg[i].val;</span><br><span class="line">            cnt += eg[i].ty;</span><br><span class="line">            fa[fx] = fy;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt &gt;= k;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    n = input(), m = input(), k = input();</span><br><span class="line">    fore(i, <span class="number">1</span>, m) eg[i].inp();</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">-101</span>, r = <span class="number">101</span>, mid;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">        mid = (l + r + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(Check(mid)) l = mid;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Check(l);</span><br><span class="line">    <span class="comment">// cout &lt;&lt; l &lt;&lt; " " &lt;&lt; r &lt;&lt; " " &lt;&lt; Check(l) &lt;&lt; endl;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, res - k * l);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="【luoguP3620】-APIO-CTSC-2007-数据备份-1"><a href="#【luoguP3620】-APIO-CTSC-2007-数据备份-1" class="headerlink" title="【luoguP3620】[APIO/CTSC 2007]数据备份"></a>【luoguP3620】[APIO/CTSC 2007]数据备份</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> o; <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> cnt[MAXN][<span class="number">2</span>], n;</span><br><span class="line">li k, use[MAXN], f[MAXN][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BET</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(f[p][<span class="number">0</span>] == f[p][<span class="number">1</span>]) <span class="keyword">return</span> cnt[p][<span class="number">1</span>] &lt; cnt[p][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">return</span> f[p][<span class="number">1</span>] &lt; f[p][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(li ex)</span></span>&#123;</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">0</span>] = cnt[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1e18</span>; cnt[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1e9</span>;</span><br><span class="line">    fore(i, <span class="number">2</span>, n)&#123;</span><br><span class="line">        f[i][<span class="number">0</span>] = f[i - <span class="number">1</span>][BET(i - <span class="number">1</span>)];</span><br><span class="line">        cnt[i][<span class="number">0</span>] = cnt[i - <span class="number">1</span>][BET(i - <span class="number">1</span>)];</span><br><span class="line">        f[i][<span class="number">1</span>] = f[i - <span class="number">1</span>][<span class="number">0</span>] + use[i] - use[i - <span class="number">1</span>] - ex;</span><br><span class="line">        cnt[i][<span class="number">1</span>] = cnt[i - <span class="number">1</span>][<span class="number">0</span>] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> nb = BET(n);</span><br><span class="line">    f[n][<span class="number">0</span>] = f[n][nb];</span><br><span class="line">    cnt[n][<span class="number">0</span>] = cnt[n][nb];</span><br><span class="line">    <span class="keyword">return</span> cnt[n][<span class="number">0</span>] &lt;= k;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("In.txt", "r", stdin);</span></span><br><span class="line">    n = input(); k = input();</span><br><span class="line">    li l = <span class="number">0</span>, r = <span class="number">0</span>, mid;</span><br><span class="line">    fore(i, <span class="number">1</span>, n) use[i] = input(), r += use[i];</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(check(mid)) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    check(r);</span><br><span class="line">    <span class="comment">// cout &lt;&lt; r &lt;&lt; endl;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>, f[n][<span class="number">0</span>] + r * k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/23/WT01-H-Celeste-%E6%BD%98%E6%9B%B2%E9%98%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/23/WT01-H-Celeste-%E6%BD%98%E6%9B%B2%E9%98%B3/" itemprop="url">WT01-H-Celeste-潘曲阳</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-23T15:21:38+08:00">
                2021-01-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="L-Bit-Sequence"><a href="#L-Bit-Sequence" class="headerlink" title="L.Bit Sequence"></a>L.Bit Sequence</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>定义 $f(x)$ 为 $x$ 二进制中1的个数</p>
<p>给定一个长度为 $m\leq 100$ 的01序列 $\{a_i\}$ ，问对于所有的 $x\in<a href="L\leq 10^{18}">0,L</a>$ ，有多少 $x$ 满足:$\forall i\in[0,m-1],f(x+i)\mod 2=a_i$</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>首先观察 $f(x)$ 的性质，显然对于 $x\in[0,2^k)$ ，$f(x+2^k) = f(x) + 1$ ， 那么 $f(x+2^k)\mod 2=f(x)\mod2 \oplus 1$</p>
<p>于是我们可以用倍增处理出 $f(x)\mod 2$ </p>
<p>令序列 $R$ 为 $x\in[0,2^k]$ 的$f(x) \mod 2$ 序列，$\overline R$ 为 $R$ 取反，那么 $x\in[0,2^{k+1})$ 对应的序列即为 $R\overline R$ ，也就是说我们需要储存 $R$ 和 $\overline R$ 才能够进行倍增处理。</p>
<p>再考虑 $\{a_i\}$ 的匹配贡献， $R\overline R$ 的贡献等于 $R$ 的贡献+$\overline R$ 的贡献+$R\overline R$ 交界处的贡献，所以实际上我们并不需要完全知道 $R$ 和 $\overline R$ ，我们只需要知道交界处是否产生新贡献即可，又注意到 $m\leq 100$，所以我们令 $R=A…B$ （其中 $A$ ， $B$ 为 $R$ 的前后各100位），我们实际上只需要记录 $A,B$ 即可，倍增计算时计算交界处 $B\overline A$ 的跨区间贡献。</p>
<p>假设 $L=2^{60} + 2^{30} + 2^{4}$ ，那么我们计算的结果为 $2^{60}$ 的正贡献和 $2^{30}$ 次方的反贡献（因为 $2^{30}$ 前面有个 $2^{60}$ ）组合的贡献，最后暴力在结尾加上 $2^4$ 的贡献即可</p>
<p>复杂度 $O(m^2logL)$</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/19/ICPC-%E6%B5%8E%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/19/ICPC-%E6%B5%8E%E5%8D%97/" itemprop="url">ICPC-济南</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-19T20:17:19+08:00">
                2021-01-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ICPC/" itemprop="url" rel="index">
                    <span itemprop="name">ICPC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="A-Matrix-Equation"><a href="#A-Matrix-Equation" class="headerlink" title="A.Matrix Equation"></a>A.Matrix Equation</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给两个大小为 $n\times n(n\leq 200)$ 的01矩阵 $A,B$，求一个01矩阵 $C$ ，满足</p>
<p>$A\times C=B\cdot C$</p>
<p>定义 </p>
<p>$A\times C=(Z_{i, j}=\sum\limits_{k=1}^{n}A_{i,k}C_{k,j}\mod 2)_{n\times n}$</p>
<p>$B\cdot C=(Z_{i,j}=B_{i,j}C_{i,j})_{n\times n}$</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>左边是异或和，右边是或</p>
<p>按列处理，令 $\vec{X_i}$ 为 $X$ 的第 $i$ 列</p>
<p>则有 $A\times \vec{C_j} = \vec{B_j}\cdot \vec{C_j}$</p>
<p>进一步考虑化简 $\vec{B_j}$</p>
<p>再按行分解 $A$ ，令 $\vec{A^i}$ 为 $A$ 的第 $i$ 行</p>
<p>则有 $\vec{A^i} \times \vec{C_j} = B_{i,j}\cdot C_{i,j}$</p>
<p>右边移到左边，则引入 $A’$</p>
<p>$\vec{A’^i}$ ，其中 $A’_{i,j}=A_{i,j}(i\neq j),A’_{i,i}=A_{i,i} \otimes \vec{B_{j}}_i$</p>
<p>最终得到异或方程组 $A’ \times \vec{C_j}=0$</p>
<p>用bitset加速 复杂度 $O(\frac{n^4}{64})$</p>
<h1 id="D-Fight-against-involution"><a href="#D-Fight-against-involution" class="headerlink" title="D.Fight against involution"></a>D.Fight against involution</h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>反内卷</p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>尽量使大的变小即可</p>
<h1 id="L-Bit-Sequence"><a href="#L-Bit-Sequence" class="headerlink" title="L.Bit Sequence"></a>L.Bit Sequence</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>定义 $f(x)$ 为 $x$ 二进制中1的个数</p>
<p>给定一个长度为 $m\leq 100$ 的01序列 $\{a_i\}$ ，问对于所有的 $x\in<a href="L\leq 10^{18}">0,L</a>$ ，有多少 $x$ 满足:$\forall i\in[0,m-1],f(x+i)\mod 2=a_i$</p>
<h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2><p>首先观察 $f(x)$ 的性质，显然对于 $x\in[0,2^k)$ ，$f(x+2^k) = f(x) + 1$ ， 那么 $f(x+2^k)\mod 2=f(x)\mod2 \oplus 1$</p>
<p>于是我们可以用倍增处理出 $f(x)\mod 2$ </p>
<p>令序列 $R$ 为 $x\in[0,2^k]$ 的$f(x) \mod 2$ 序列，$\overline R$ 为 $R$ 取反，那么 $x\in[0,2^{k+1})$ 对应的序列即为 $R\overline R$ ，也就是说我们需要储存 $R$ 和 $\overline R$ 才能够进行倍增处理。</p>
<p>再考虑 $\{a_i\}$ 的匹配贡献， $R\overline R$ 的贡献等于 $R$ 的贡献+$\overline R$ 的贡献+$R\overline R$ 交界处的贡献，所以实际上我们并不需要完全知道 $R$ 和 $\overline R$ ，我们只需要知道交界处是否产生新贡献即可，又注意到 $m\leq 100$，所以我们令 $R=A…B$ （其中 $A$ ， $B$ 为 $R$ 的前后各100位），我们实际上只需要记录 $A,B$ 即可，倍增计算时计算交界处 $B\overline A$ 的跨区间贡献。</p>
<p>假设 $L=2^{60} + 2^{30} + 2^{4}$ ，那么我们计算的结果为 $2^{60}$ 的正贡献和 $2^{30}$ 次方的反贡献（因为 $2^{30}$ 前面有个 $2^{60}$ ）组合的贡献，最后暴力在结尾加上 $2^4$ 的贡献即可</p>
<p>复杂度 $O(m^2logL)$</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/15/ICPC-%E9%A6%99%E6%B8%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/15/ICPC-%E9%A6%99%E6%B8%AF/" itemprop="url">ICPC-香港</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-15T17:42:53+08:00">
                2020-12-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ICPC/" itemprop="url" rel="index">
                    <span itemprop="name">ICPC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="A-Axis-of-Symmetry"><a href="#A-Axis-of-Symmetry" class="headerlink" title="A.Axis of Symmetry"></a><a href="https://codeforces.com/gym/102452/problem/A" target="_blank" rel="noopener">A.Axis of Symmetry</a></h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给二维平面上 $n\leq 10^5$ 个无重叠的矩形，输出这些矩形合并成的图形的对称轴（只考虑形成的图形而不考虑相交处的顶点）</p>
<h2 id="题解-离散化-找规律"><a href="#题解-离散化-找规律" class="headerlink" title="题解:离散化+找规律"></a>题解:离散化+找规律</h2><p>将所有顶点处理出来，出现了偶数次的可以直接消除，出现奇数次的保留，我们就能够得到表示形成最终的图形所需要的边界的最小表示（每个点代表有一个转角，同一轴向上的两个点代表有直线）</p>
<p>找出对称轴，然后转一下，用map和原图形比较一下即可</p>
<h1 id="B-Binary-Tree"><a href="#B-Binary-Tree" class="headerlink" title="B.Binary Tree"></a><a href="https://codeforces.com/gym/102452/problem/B" target="_blank" rel="noopener">B.Binary Tree</a></h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>给一颗二叉树，每次操作仅能删除一颗完全二叉子树，最后一个操作的人胜，问谁胜</p>
<h2 id="题解-博弈"><a href="#题解-博弈" class="headerlink" title="题解:博弈"></a>题解:博弈</h2><p>每次操作必定删除奇数个点，奇偶判胜负</p>
<h2 id="C-Constructing-Ranches"><a href="#C-Constructing-Ranches" class="headerlink" title="C.Constructing Ranches"></a><a href="https://codeforces.com/gym/102452/problem/C" target="_blank" rel="noopener">C.Constructing Ranches</a></h2><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>一棵树上有 $n\leq 2\cdot 10^5$ 个点，每个点存在一条木棍，长度随机，问有多少条简单路径包含的所有木棍可以围成一个凸多边形</p>
<h2 id="题解-点分治-排序统计"><a href="#题解-点分治-排序统计" class="headerlink" title="题解:点分治+排序统计"></a>题解:点分治+排序统计</h2><p>记根为 $rt$ ，路径的两个点为 $u, v$ ，点权为 $a$ ，$rt$ 到 $p$ 路径点权和为 $sum_p$， 路径最大值为 $mx_p$</p>
<p>显然点数要 $\geq 3$， 其次应有 $sum_u+sum_v-a_{rt} &gt; max(mx_u, mx_v)$ </p>
<p>我们根据 $mx$ 值对所有路径进行排序，即对于当前点 $u$， 当前计入统计的 $v$ 一定有 $mx_u\geq mx_v$</p>
<p>则我们需要统计的点 $v$ 满足 $sum_u-mx_u&gt;a_{rt}-sumv$</p>
<p>离散化用树状数组统计即可</p>
<p>然后把当前 $u$ 加入到统计的 $v$ 中即可</p>
<h1 id="D-Defining-Labels"><a href="#D-Defining-Labels" class="headerlink" title="D.Defining Labels"></a><a href="https://codeforces.com/gym/102452/problem/D" target="_blank" rel="noopener">D.Defining Labels</a></h1><h1 id="E-Erasing-Numbers"><a href="#E-Erasing-Numbers" class="headerlink" title="E.Erasing Numbers"></a><a href="https://codeforces.com/gym/102452/problem/E" target="_blank" rel="noopener">E.Erasing Numbers</a></h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>有 $n\leq 5000且为奇数$ 个互不相等的数字，每次可以选择 3 个相邻的数字，然后擦去其中的最大值和最小值，剩下的数则继续连起来，最后会剩下一个数字。现在对于每个数字，输出它是否有可能留到最后</p>
<h2 id="题解-抽象化-贪心"><a href="#题解-抽象化-贪心" class="headerlink" title="题解:抽象化+贪心"></a>题解:抽象化+贪心</h2><p>将区间以当前讨论的数字为中心分为左右两部分，所有数值大于它的数字变为1，其它的变为0。</p>
<p>由观察可得，最后剩下的另外两个数字为01时（无论位置在哪）都可行</p>
<p>还有如下规律 $001\to 0$ $011\to 1$ $000\to 0$ $111\to 1$ </p>
<p>进一步由上面两个规律推广，最后剩下的0和1数量相等时必定可行。</p>
<p>由上面性质进行模拟，尽量使多的数字减少即可</p>
<h1 id="G-Game-Design"><a href="#G-Game-Design" class="headerlink" title="G.Game Design"></a><a href="https://codeforces.com/gym/102452/problem/G" target="_blank" rel="noopener">G.Game Design</a></h1><h1 id="H-Hold-the-Line"><a href="#H-Hold-the-Line" class="headerlink" title="H.Hold the Line"></a><a href="https://codeforces.com/gym/102452/problem/H" target="_blank" rel="noopener">H.Hold the Line</a></h1><h1 id="I-Incoming-Asteroids"><a href="#I-Incoming-Asteroids" class="headerlink" title="I.Incoming Asteroids"></a><a href="https://codeforces.com/gym/102452/problem/I" target="_blank" rel="noopener">I.Incoming Asteroids</a></h1><h1 id="J-Junior-Mathematician"><a href="#J-Junior-Mathematician" class="headerlink" title="J.Junior Mathematician"></a><a href="https://codeforces.com/gym/102452/problem/J" target="_blank" rel="noopener">J.Junior Mathematician</a></h1><h1 id="K-Key-Project"><a href="#K-Key-Project" class="headerlink" title="K.Key Project"></a><a href="https://codeforces.com/gym/102452/problem/K" target="_blank" rel="noopener">K.Key Project</a></h1>
          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/01/SEERC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/01/SEERC/" itemprop="url">SEERC</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-01T14:47:14+08:00">
                2020-12-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ICPC/" itemprop="url" rel="index">
                    <span itemprop="name">ICPC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="A-Max-or-Min"><a href="#A-Max-or-Min" class="headerlink" title="A.Max or Min"></a><a href="https://codeforces.com/gym/102392/problem/A" target="_blank" rel="noopener">A.Max or Min</a></h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>对于一个环形数列 ($n\leq 2\cdot 10^5$) ，对于每个数有两类操作：1、将它变为以它为中心的三个数的最小值 2、将它变为以它为中心的三个数的最大值</p>
<p>问对于数字 $x$ 从1 到 $m\leq 2\cdot 10^5 $ ，将这个数列全部变成 $x$ 需要最少多少次操作。</p>
<h2 id="题解-找规律-线段树"><a href="#题解-找规律-线段树" class="headerlink" title="题解 : 找规律+线段树"></a>题解 : 找规律+线段树</h2><h3 id="规律"><a href="#规律" class="headerlink" title="规律"></a>规律</h3><p>对于 $x$ ，我们将数字分为大于等于小于它，将所有等于它的数字抽象为 $0$ ，大于它的数字抽象为 $1$ ，小于它的数字抽象为 $-1$ 。 那么我们可以将整个数列以 $0$ 为端点分为若干部分：</p>
<p> 对于类似于 $[0,1,1,1,0]$ 和 $[0,-1,-1,-1,0]$ 这样的数列，显然操作数等于非零数字的个数。</p>
<p> 对于 $[0, 1, 1, -1, -1, 0]$ 这样子的数列，我们在 $[1, -1]$ 处需要多使用一个操作。 类似的，对于多个连续的 $[1,1,-1,-1,1,1,-1]$ 我们需要的额外操作数为 $[1, -1]$ 和 $[-1,1]$ 的数量。</p>
<p>而对于 $[0,1, -1, 1, -1, 1,0]$ 这样反复横跳的例子，显然将 $1$ 和 $-1$ 中更少的那一部分先取 最大/最小 然后再进行操作是最优的，对于上述例子，就是先进行两个操作将数列变为$[0,1,1,1,1,1,0]$ 然后再操作。此时需要的额外操作数为 $\lfloor\frac{区间长度}{2}\rfloor$ 。为了方便维护，我们可以使用容斥将这一步与上一步合起来。</p>
<blockquote>
<p>当前操作中，每一次的操作都能够减少一次第二类操作</p>
</blockquote>
<p>因此最终的表示式为 $操作数=非零数+[-1,1]数+[1,-1]数-\sum\lfloor\frac{斑马线长度}{2}\rfloor$</p>
<h3 id="维护"><a href="#维护" class="headerlink" title="维护"></a>维护</h3><p>我们从小到大依次改变数列中的 $-1, 0, 1$ ， 其中表达式中的前三个数我们在改变过程中即可得到，而最后一个数需要用线段树维护，具体维护见代码</p>
<h1 id="B-Level-Up"><a href="#B-Level-Up" class="headerlink" title="B.Level Up"></a><a href="https://codeforces.com/gym/102392/problem/B" target="_blank" rel="noopener">B.Level Up</a></h1><p><em>Sumail版本</em></p>
<h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>现在有 $n\leq 500$ 个任务，每个任务完成后可以获得经验升级，而在不同等级做同样的任务需要的时间和获得的竟然不同。对于每个任务有四个权值 $x, t, y, r$ 分别代表在0级时完成任务获得的经验，需要的时间和在1级时完成任务获得的经验、需要的时间。 现在告诉你升到一级和二级需要的经验值 $s_1,s_2\leq 500$ ，问最少需要多少时间才能升到2级。</p>
<h2 id="题解-DP"><a href="#题解-DP" class="headerlink" title="题解: DP"></a>题解: DP</h2><p>对任务的经验值从小到大排序，然后分别考虑0级和1级时做任务的转移， $O(n^3)$ 讨论即可。</p>
<p><em>zlq版本</em></p>
<p>对于能升第一级的一些任务, 把涨经验最多的排在后面一定是合法的, 否则不一定, 会出现提前升级的情况, 所以要先按第一级经验排序再 dp.</p>
<h1 id="C-Find-the-Array"><a href="#C-Find-the-Array" class="headerlink" title="C.Find the Array"></a><a href="https://codeforces.com/gym/102392/problem/C" target="_blank" rel="noopener">C.Find the Array</a></h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>有一个未知的数列，告诉你它的长度 $n\leq 250$ 。现在有两类询问1、询问某个特定点的值 2、询问某些数，最终会返回这些数两两之差的绝对值。现在要求通过少于30次询问，求出数列的所有值。</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>首先，可以通过 $O(logn)$ 的操作找到包含左端点、最小值、最大值的最短区间（查询是否包含最大差值），其中该区间的右端点即为数列的最小值或最大值，想要验证它是最大值还是最小值可以通过两次1类询问。</p>
<p>而后通过两次二类询问找到所有的点和该极值的差值，具体操作为一次二类询问，询问所有点；一次二类询问，询问除了极值点外的所有点，得到的两个集合求差，我们将这类操作定义为求这些点和极值点的差值。这样我们得到的集合定义为 $A$ 。</p>
<p>最后我们通过二进制编码来划分所有的点，我们分别将标号二进制编码中包含 $2^i$ 的点的与极值的差值的集合找出来，将之定义为 $B_{i1}$，将不包含 $2^i$ 的点定义为 $B_{i_0}$ ，显然有 $B_{i1}\cup B_{i0}=A$。</p>
<blockquote>
<p>举个例子，对于 $n = 8 = (1000)_2$ ， $B_1$ 中包含的点为 $\{2=(10)_2,6=(110)_2\}$</p>
</blockquote>
<p>对于一个非极值点 $x=b^0b^1…b^m$ ，它与极值的差为 $\bigcap\limits_{i} B_{ib^i}$ 的唯一值</p>
<h1 id="D-Cycle-String"><a href="#D-Cycle-String" class="headerlink" title="D.Cycle String?"></a><a href="https://codeforces.com/gym/102392/problem/D" target="_blank" rel="noopener">D.Cycle String?</a></h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>对于一个长度为 $2\cdot n$ 的环形串，如果它的所有长度为 $n$ 的子串均无重复，那么我们定义它为 $Cycle String$ ，现给一个长度为 $2\cdot n$ 的串，试将它变为一个 $CycleString$ ，如果不能变为 $CycleString$ 输出NO。</p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>对于字符串中单个字符出现超过 $2n-2$ 次，那么一定无解</p>
<p>如果出现 $2n-2$ 次，串的长度大于 4 且 仅有两种字符，也一定无解</p>
<p>否则有解，构造时从小到大排列字符，同时注意一种字符串不能连续出现超过 $n$ 次。</p>
<h1 id="E-Life-Transfer"><a href="#E-Life-Transfer" class="headerlink" title="E.Life Transfer"></a><a href="https://codeforces.com/gym/102392/problem/E" target="_blank" rel="noopener">E.Life Transfer</a></h1><p>暴力模拟汽车数从0到最多，然后求个最小值即可</p>
<h1 id="F-Game-on-a-Tree"><a href="#F-Game-on-a-Tree" class="headerlink" title="F.Game on a Tree"></a><a href="https://codeforces.com/gym/102392/problem/F" target="_blank" rel="noopener">F.Game on a Tree</a></h1><h3 id="题意-4"><a href="#题意-4" class="headerlink" title="题意"></a>题意</h3><p>给定一个有根树, 二人博弈, 每次选择一个未被染色的点染色, 并且必须是对方上次选择的点的祖先或子孙. 先手第一次任意选择. 问胜利方.</p>
<h3 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h3><p>首先要知道二分图博弈的结论, 即最大匹配占满所有点时后手胜, 否则先手胜. 把原问题的树上所有有祖孙关系的点都连边. 但这个时候图很大, 不现实.</p>
<p>$dp[i]$ 为以 $i$ 为根节点的子树, 在新图中跑二分图最大匹配还剩多少个点. 转移时, 如果儿子都匹配满了, 就剩自己一个点, $dp[i]=1$; 否则, 可以把当前节点和一个空闲的子孙匹配, 而不同子树的点不能匹配, $dp[i]=\sum dp[son] - 1$. 最后答案就看 $dp[1]$ 是否为 $0$.</p>
<h1 id="G-Projection"><a href="#G-Projection" class="headerlink" title="G.Projection"></a><a href="https://codeforces.com/gym/102392/problem/G" target="_blank" rel="noopener">G.Projection</a></h1><p><em>Sumail版本</em></p>
<h2 id="题意-5"><a href="#题意-5" class="headerlink" title="题意"></a>题意</h2><p>给定一个三维方块图形的左视图和正视图，问使得图形方块数最少和最多的方案是什么。</p>
<h2 id="题解-模拟"><a href="#题解-模拟" class="headerlink" title="题解:模拟"></a>题解:模拟</h2><p>显然对于一个宽为 $w$ 长为 $l$ 的投影，方块数最大为平面，最小为相互垂直的线段</p>
<p><em>zlq版本</em></p>
<h3 id="题意-6"><a href="#题意-6" class="headerlink" title="题意"></a>题意</h3><p>有一个由若干小正方体组成的物体, 给出他的正视图和左视图, 求最小和最大体积的方案, 并要求字典序最小.</p>
<h3 id="题解-3"><a href="#题解-3" class="headerlink" title="题解"></a>题解</h3><p>每一个高度是独立的, 所以分层看. 最大体积显然就是正视图和左视图里尽可能塞正方体, 最小体积就是正视图和左视图取最大值, 由于字典序要最小所以多出来的小正方体要放在合适的地方, 贪心即可.</p>
<h1 id="I-Absolute-Game"><a href="#I-Absolute-Game" class="headerlink" title="I.Absolute Game"></a><a href="https://codeforces.com/gym/102392/problem/I" target="_blank" rel="noopener">I.Absolute Game</a></h1><h3 id="题意-7"><a href="#题意-7" class="headerlink" title="题意"></a>题意</h3><p>两人各自有一个数组, 每次删掉自己的数组中的一个元素, 直到数组只剩一个数, 先手方要最大化两个数组剩下的数的差, 而后手方要最小化. 问答案.</p>
<h2 id="题解-博弈"><a href="#题解-博弈" class="headerlink" title="题解:博弈"></a>题解:博弈</h2><p>a 数组里每一个数在 b 数组中都有一个距离最近的数, 不妨标记起来(如果有多个只标记一个), 这样先手删掉一个数之后, b 数组里至少有一个没被标记的数, 后手就删掉这样的数. 最后 a 只剩一个数时 b 剩的数就是被标记的, 即最近的数,所以先手每次都删掉那些 $min_{j} |a_i-b_j|$ 小的 $a_i$ 来最大化结果, 后手每次删未标记的数来最小化结果. 最终结果就是 $</p>
<h1 id="J-Graph-and-Cycles"><a href="#J-Graph-and-Cycles" class="headerlink" title="J.Graph and Cycles"></a><a href="https://codeforces.com/gym/102392/problem/J" target="_blank" rel="noopener">J.Graph and Cycles</a></h1><h2 id="题意-8"><a href="#题意-8" class="headerlink" title="题意"></a>题意</h2><p>对一张完全图，点数$n\leq 999$ 且为奇数，将其分解为若干环，将分解的权值定义为每个环中相邻两条边中较大权值之和。问分解的最小权值是多少</p>
<h2 id="题解-贪心"><a href="#题解-贪心" class="headerlink" title="题解:贪心"></a>题解:贪心</h2><p>首先我们要知道分解是自洽的，对于每个点，我们选择与该点相邻的两条边作为某个环的一部分，无需考虑环的整体，这样任意地选择之后一定能将它分解成环（路径上任意一个点的度数为偶数，则该路径一定构成环）。因此我们只需要在选择相邻的两条边时使得贡献尽量小即可，具体做法是将边从大到小排序，每次取剩余边中最大的两条边组合。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="A"><a href="#A" class="headerlink" title="A"></a>A</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> las(x) (x == 0 ? n - 1 : x - 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> nex(x) (x == n - 1 ? 0 : x + 1)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">3</span>)+(o &lt;&lt; <span class="number">1</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;pos[MAXN];</span><br><span class="line"><span class="keyword">int</span> v[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> SGT&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> mid ((l + r) &gt;&gt; 1)</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> ls (o &lt;&lt; 1)</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> rs (o &lt;&lt; 1 | 1)</span></span><br><span class="line">    <span class="keyword">int</span> NL, P, V, res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mi[MAXN &lt;&lt; <span class="number">3</span>], le[MAXN &lt;&lt; <span class="number">3</span>], ri[MAXN &lt;&lt; <span class="number">3</span>], cnt[MAXN &lt;&lt; <span class="number">3</span>];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        mi[o] = mi[ls] + mi[rs];</span><br><span class="line">        cnt[o] = cnt[ls] + cnt[rs];</span><br><span class="line">        <span class="keyword">if</span>((v[mid] * v[mid + <span class="number">1</span>] == <span class="number">-1</span>) &amp;&amp; (ri[ls] != (mid - l + <span class="number">1</span>)) &amp;&amp; (le[rs] != (r - mid)))</span><br><span class="line">        &#123;</span><br><span class="line">            mi[o] += ri[ls] + le[rs];</span><br><span class="line">            cnt[o] += (ri[ls] + le[rs] - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            le[o] = le[ls];</span><br><span class="line">            ri[o] = ri[rs];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(v[mid] * v[mid + <span class="number">1</span>] != <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cnt[o] += (ri[ls] != (mid - l + <span class="number">1</span>) ? (ri[ls] - <span class="number">1</span>)/<span class="number">2</span> : <span class="number">0</span>) + ((le[rs] != r - mid) ? (le[rs] - <span class="number">1</span>)/<span class="number">2</span> : <span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            le[o] = le[ls] + ((le[ls] == mid - l + <span class="number">1</span> &amp;&amp; v[mid] * v[mid + <span class="number">1</span>] == <span class="number">-1</span>)? le[rs] : <span class="number">0</span>);</span><br><span class="line">            ri[o] = ri[rs] + ((ri[rs] == r - mid &amp;&amp; v[mid] * v[mid + <span class="number">1</span>] == <span class="number">-1</span>)? ri[ls] : <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            v[l] = <span class="number">1</span>;</span><br><span class="line">            le[o] = ri[o] = <span class="number">1</span>;</span><br><span class="line">            mi[o] = cnt[o] = <span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            init(ls, l, mid);</span><br><span class="line">            init(rs, mid + <span class="number">1</span>, r);</span><br><span class="line">            merge(o, l, r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">modi</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            v[l] = V;</span><br><span class="line">            <span class="keyword">if</span>(!V) le[o] = ri[o] = mi[o] = cnt[o] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                le[o] = ri[o] = <span class="number">1</span>;</span><br><span class="line">                mi[o] = cnt[o] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(P &lt;= mid) modi(ls, l, mid);</span><br><span class="line">            <span class="keyword">else</span> modi(rs, mid + <span class="number">1</span>, r);</span><br><span class="line">            merge(o, l, r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Modi</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> nv)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lasv = v[p];</span><br><span class="line">        <span class="keyword">if</span>(lasv != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(v[las(p)] * lasv == <span class="number">-1</span>) res--;</span><br><span class="line">            <span class="keyword">if</span>(v[nex(p)] * lasv == <span class="number">-1</span>) res--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nv != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(v[las(p)] * nv == <span class="number">-1</span>) res++;</span><br><span class="line">            <span class="keyword">if</span>(v[nex(p)] * nv == <span class="number">-1</span>) res++;</span><br><span class="line">        &#125;</span><br><span class="line">        P = p; V = nv;</span><br><span class="line">        modi(<span class="number">1</span>, <span class="number">0</span>, NL);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">CAL</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> res - (cnt[<span class="number">1</span>] + ((v[<span class="number">0</span>]*v[NL] == <span class="number">-1</span> &amp;&amp; (mi[<span class="number">1</span>] != n))? (le[<span class="number">1</span>] + ri[<span class="number">1</span>] - <span class="number">1</span>)/<span class="number">2</span> : ((le[<span class="number">1</span>] - <span class="number">1</span>)/<span class="number">2</span> + (ri[<span class="number">1</span>] - <span class="number">1</span>)/<span class="number">2</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> mid</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> ls</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> rs</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    n = input(), m = input();</span><br><span class="line">    SGT::NL = n - <span class="number">1</span>;</span><br><span class="line">    SGT::init(<span class="number">1</span>, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">    Fore(i, <span class="number">0</span>, n)</span><br><span class="line">        pos[input()].emplace_back(i);</span><br><span class="line">    fore(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">        <span class="keyword">if</span>(pos[i].size() == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"-1 "</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v:pos[i]) SGT::Modi(v, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lu "</span>, n - pos[i].size() + SGT::CAL());</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v:pos[i]) SGT::Modi(v, <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="B"><a href="#B" class="headerlink" title="B"></a>B</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ti tuplt<span class="meta-string">&lt;int,int,int,int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">505</span>;</span><br><span class="line"><span class="keyword">const</span> li INF = <span class="number">0x3f3f3f3f3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">3</span>)+(o &lt;&lt; <span class="number">1</span>)+ c- <span class="number">48</span>;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, t, y, r;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inp</span><span class="params">()</span></span>&#123;x = input(); t = input(); y = input(); r = input();&#125;</span><br><span class="line">&#125;node[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">comp</span><span class="params">(Node &amp;A, Node &amp;B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(A.x != B.x)<span class="keyword">return</span> A.x &lt; B.x;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> A.y &lt; B.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li dp[<span class="number">2</span>][MAXN][MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = input(), S1 = input(), S2 = input();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)node[i].inp();</span><br><span class="line">    sort(node + <span class="number">1</span>, node + n + <span class="number">1</span>, comp);</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">int</span> ss1, ss2;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    fore(i, <span class="number">1</span>, n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp[i&amp;<span class="number">1</span>], <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp[i&amp;<span class="number">1</span>]));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> t = i &amp; <span class="number">1</span>, s1 = S1; s1 &gt;= <span class="number">0</span>; s1--)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> s2 = S2; s2 &gt;= <span class="number">0</span>; s2--)</span><br><span class="line">            <span class="keyword">if</span>(dp[t^<span class="number">1</span>][s1][s2] != INF)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[t][s1][s2] = dp[t^<span class="number">1</span>][s1][s2];</span><br><span class="line">                <span class="keyword">if</span>(s1 != S1)</span><br><span class="line">                &#123;</span><br><span class="line">                    ss1 = min(S1, s1 + node[i].x);</span><br><span class="line">                    ss2 = min(S2, max(s1 + node[i].x - S1, <span class="number">0</span>) + s2);</span><br><span class="line">                    dp[t][ss1][ss2] = min(dp[t][ss1][ss2], dp[t ^ <span class="number">1</span>][s1][s2] + node[i].t);</span><br><span class="line">                &#125;</span><br><span class="line">                ss1 = s1; ss2 = min(S2, s2 + node[i].y);</span><br><span class="line">                dp[t][ss1][ss2] = min(dp[t][ss1][ss2], dp[t^<span class="number">1</span>][s1][s2] + node[i].r);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dp[n &amp; <span class="number">1</span>][S1][S2] != INF) <span class="built_in">printf</span>(<span class="string">"%lld"</span>, dp[n &amp; <span class="number">1</span>][S1][S2]);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; all, use[<span class="number">11</span>][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> v0, res[<span class="number">300</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">INP</span><span class="params">(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;des)</span></span>&#123;</span><br><span class="line">    des.clear();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> nv, i = <span class="number">1</span>; i &lt;= (n - <span class="number">1</span>) * n / <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; nv;</span><br><span class="line">        des.emplace_back(nv);;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(des.begin(), des.end());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DEC</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; B, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;C)</span></span>&#123;</span><br><span class="line">    C.clear();</span><br><span class="line">    <span class="keyword">while</span>(A.size())&#123;</span><br><span class="line">        <span class="keyword">while</span>(B.size() &amp;&amp; B.back() &gt; A.back()) B.pop_back();</span><br><span class="line">        <span class="keyword">while</span>(A.size() &amp;&amp; B.size() &amp;&amp; B.back() == A.back())</span><br><span class="line">        &#123;</span><br><span class="line">            B.pop_back();</span><br><span class="line">            A.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(A.size() &amp;&amp; (B.empty() || (A.back() &gt; B.back())))&#123;</span><br><span class="line">            C.emplace_back(A.back());</span><br><span class="line">            A.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(C.begin(), C.end());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">INTS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; B, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;C)</span></span>&#123;</span><br><span class="line">    C.clear();</span><br><span class="line">    <span class="keyword">while</span>(A.size())&#123;</span><br><span class="line">        <span class="keyword">while</span>(B.size() &amp;&amp; B.back() &gt; A.back()) B.pop_back();</span><br><span class="line">        <span class="keyword">while</span>(A.size() &amp;&amp; B.size() &amp;&amp; A.back() == B.back())&#123;</span><br><span class="line">            C.emplace_back(A.back());</span><br><span class="line">            A.pop_back();</span><br><span class="line">            B.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(A.size() &amp;&amp; (B.empty() || (A.back() &gt; B.back())))</span><br><span class="line">            A.pop_back();</span><br><span class="line">    &#125;</span><br><span class="line">    sort(C.begin(), C.end());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; n &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" \n"</span>[i == n];</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tempA, tempB;</span><br><span class="line">    INP(n, tempA);</span><br><span class="line">    <span class="keyword">int</span> mx = <span class="number">0</span>, L = <span class="number">1</span>, R = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> v : tempA) mx = max(mx, v);</span><br><span class="line">    <span class="keyword">while</span>(L &lt; R)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (L + R) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; mid &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= mid; i++)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" \n"</span>[i == mid];</span><br><span class="line">        INP(mid, tempB);</span><br><span class="line">        <span class="keyword">int</span> nmx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v : tempB) nmx = max(nmx, v);</span><br><span class="line">        <span class="keyword">if</span>(nmx == mx) R = mid;</span><br><span class="line">        <span class="keyword">else</span> L = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span>(i != R)<span class="built_in">cout</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; i;<span class="comment">//printf(" %d", i);</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    INP(n - <span class="number">1</span>, tempB);</span><br><span class="line">    DEC(tempA, tempB, all);</span><br><span class="line">    <span class="keyword">return</span> R;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _init(<span class="keyword">int</span> n, <span class="keyword">int</span> pos)&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; pos &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; v0;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; ((pos == <span class="number">1</span>) ? n : <span class="number">1</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> nv;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; nv;</span><br><span class="line">    <span class="keyword">if</span>(nv &lt; v0) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>.flush();</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n &lt;= <span class="number">30</span>)&#123;</span><br><span class="line">        fore(i, <span class="number">1</span>, n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; res[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="number">3</span> &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        fore(i, <span class="number">1</span>, n)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; res[i] &lt;&lt; <span class="string">" \n"</span>[i == n];</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> pos = init(n), a = _init(n, pos);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; (<span class="number">1</span> &lt;&lt; i) &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;temp, tempA, tempB;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            <span class="keyword">if</span>((j &amp; (<span class="number">1</span> &lt;&lt; i)) &amp;&amp; (j != pos)) temp.emplace_back(j);</span><br><span class="line">        <span class="keyword">if</span>(temp.size() &gt;= <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; temp.size();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> v : temp) <span class="built_in">cout</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; v; <span class="built_in">cout</span> &lt;&lt; <span class="string">'\n'</span>;<span class="comment">// printf(" %d", v); putchar('\n');</span></span><br><span class="line">            INP(temp.size(), tempA);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(temp.size() &gt;= <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; temp.size() + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> v : temp) <span class="built_in">cout</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; v; <span class="built_in">cout</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; pos &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">          	INP(temp.size() + <span class="number">1</span>, tempB);</span><br><span class="line">        &#125;</span><br><span class="line">        DEC(tempB, tempA, use[i][<span class="number">1</span>]);</span><br><span class="line">        DEC(all, use[i][<span class="number">1</span>], use[i][<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span>(i != pos)&#123;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp  = all;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; (<span class="number">1</span> &lt;&lt; j) &lt;= n; j++)</span><br><span class="line">                INTS(temp, use[j][(i &amp; (<span class="number">1</span> &lt;&lt; j)) != <span class="number">0</span>], temp);</span><br><span class="line">            res[i] = temp.back();</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"3 "</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; v0 + a * res[i] &lt;&lt; <span class="string">" \n"</span>[i == n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="D"><a href="#D" class="headerlink" title="D"></a>D</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXC = <span class="number">26</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Cnt[MAXC];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">string</span> s;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">	sort(s.begin(), s.end());</span><br><span class="line">	<span class="keyword">int</span> sz = s.size();</span><br><span class="line">	<span class="keyword">if</span>(sz == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(s[<span class="number">0</span>] == s[<span class="number">1</span>]) <span class="built_in">puts</span>(<span class="string">"NO"</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"YES"</span>), <span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> ncnt = <span class="number">1</span>, maxcnt = <span class="number">1</span>, mk = s[<span class="number">0</span>] - <span class="string">'a'</span>, n = sz&gt;&gt;<span class="number">1</span>, mkcnt = <span class="number">1</span>;</span><br><span class="line">	Cnt[s[<span class="number">0</span>]-<span class="string">'a'</span>]++;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; sz; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		Cnt[s[i] - <span class="string">'a'</span>]++;</span><br><span class="line">		<span class="keyword">if</span>(s[i] == s[i - <span class="number">1</span>])ncnt++;</span><br><span class="line">		<span class="keyword">else</span> ncnt = <span class="number">1</span>, mkcnt++;</span><br><span class="line">		<span class="keyword">if</span>(maxcnt &lt; ncnt) maxcnt = ncnt, mk = s[i] - <span class="string">'a'</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(maxcnt &gt; sz - <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">"NO"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(sz &gt; <span class="number">4</span> &amp;&amp; maxcnt == sz - <span class="number">2</span> &amp;&amp; mkcnt == <span class="number">2</span>)&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">"NO"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">"YES"</span>);</span><br><span class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(len &lt; sz)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> count = n, nex = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span>(count &amp;&amp; Cnt[mk])</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">putchar</span>(<span class="keyword">char</span>(mk + <span class="string">'a'</span>));</span><br><span class="line">				Cnt[mk]--;</span><br><span class="line">				count--;</span><br><span class="line">				len++;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">while</span>(nex &lt; <span class="number">26</span> &amp;&amp; (Cnt[nex] == <span class="number">0</span> || nex == mk))</span><br><span class="line">				nex++;</span><br><span class="line">			len++;</span><br><span class="line">			<span class="built_in">putchar</span>(<span class="string">'a'</span> + nex);</span><br><span class="line">			Cnt[nex]--;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="E"><a href="#E" class="headerlink" title="E"></a>E</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> li inf = <span class="number">1e18</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">5</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">	<span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">	<span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">		o = (o &lt;&lt; <span class="number">3</span>)+(o &lt;&lt; <span class="number">1</span>)+(c - <span class="number">48</span>);</span><br><span class="line">	<span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li n, k, lc, pc, lm, pm, t, d, mo, un, le, res;</span><br><span class="line">li A[MAXN];</span><br><span class="line"><span class="keyword">bool</span> mk[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ADD</span><span class="params">(li v, li t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(v &gt; lm) mo += t * min(d, v - lm);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(lm - v &gt; d)un += t;</span><br><span class="line">	<span class="keyword">else</span> le += t * (lm - v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DRI</span><span class="params">(li v)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(v &gt; lc) mo += min(d, v - lc);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(lc - v &gt; d) un ++;</span><br><span class="line">	<span class="keyword">else</span> le += lc - v; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PAS</span><span class="params">(li v)</span></span>&#123;mo += min(d, v - <span class="number">1</span>);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	n = input(), k = input();</span><br><span class="line">	lc = input(), pc = input(), lm = input(), pm = input();</span><br><span class="line">	t = input(), d = input();</span><br><span class="line">	fore(i, <span class="number">1</span>, n) A[i] = input();</span><br><span class="line">	sort(A + <span class="number">1</span>, A + n + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> dr = n, add = <span class="number">-1</span>;</span><br><span class="line">	fore(i, <span class="number">1</span>, n)</span><br><span class="line">		ADD(A[i], <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span>(un || (le &gt; mo)) res = inf;</span><br><span class="line">	<span class="keyword">else</span> res = t * le + n * pm;</span><br><span class="line">	li rest = n, j = <span class="number">1</span>, car = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(rest)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(mk[dr]) dr += add;</span><br><span class="line">		mk[dr] = <span class="number">1</span>;</span><br><span class="line">		ADD(A[dr], <span class="number">-1</span>);</span><br><span class="line">		DRI(A[dr]);</span><br><span class="line">		rest--;</span><br><span class="line">		li pas = k - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span>(rest &amp;&amp; j &lt;= n &amp;&amp; pas)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!mk[j])</span><br><span class="line">			&#123;</span><br><span class="line">				mk[j] = <span class="number">1</span>;</span><br><span class="line">				ADD(A[j], <span class="number">-1</span>);</span><br><span class="line">				PAS(A[j]);</span><br><span class="line">				pas--;</span><br><span class="line">				rest--;</span><br><span class="line">			&#125;</span><br><span class="line">			j++;</span><br><span class="line">		&#125;</span><br><span class="line">		car++;</span><br><span class="line">		<span class="keyword">if</span>(le &lt;= mo &amp;&amp; (!un))res = min(res, car * pc + rest * pm + le * t);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(res == inf) <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%lld"</span>, res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="F"><a href="#F" class="headerlink" title="F"></a>F</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inc(x, l, r) for (int x = l; x &lt;= r; x++)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, u, v, dp[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> par)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> son : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (son == par) <span class="keyword">continue</span>;</span><br><span class="line">        r += dfs(son, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (r)</span><br><span class="line">        r--;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        r = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> dp[x] = r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    inc(i, <span class="number">1</span>, n - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;u, &amp;v);</span><br><span class="line">        g[u].push_back(v);</span><br><span class="line">        g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (dfs(<span class="number">1</span>, <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Alice\n"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Bob\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="G"><a href="#G" class="headerlink" title="G"></a>G</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inc(x,l,r) for(int x=l;x&lt;=r;x++)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,m,h;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">105</span>][<span class="number">105</span>], b[<span class="number">105</span>][<span class="number">105</span>];</span><br><span class="line"><span class="keyword">char</span> ch[<span class="number">105</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> u,v,w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt;p,q;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;n, &amp;m, &amp;h);</span><br><span class="line">	inc(i,<span class="number">0</span>,n<span class="number">-1</span>) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%s"</span>, ch);</span><br><span class="line">	 	inc(j,<span class="number">0</span>,m<span class="number">-1</span>)&#123;</span><br><span class="line">			a[i][j]=ch[j]-<span class="string">'0'</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	inc(i,<span class="number">0</span>,n<span class="number">-1</span>) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%s"</span>, ch);</span><br><span class="line">	 	inc(j,<span class="number">0</span>,h<span class="number">-1</span>)&#123;</span><br><span class="line">			b[i][j]=ch[j]-<span class="string">'0'</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	inc(i,<span class="number">0</span>,n<span class="number">-1</span>)&#123;</span><br><span class="line">		inc(j,<span class="number">0</span>,m<span class="number">-1</span>) &#123;</span><br><span class="line">			inc(k,<span class="number">0</span>,h<span class="number">-1</span>)<span class="keyword">if</span>(a[i][j]&amp;&amp;b[i][k])p.push_back(&#123;i,j,k&#125;);</span><br><span class="line">		&#125;	</span><br><span class="line">		<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;v1,v2;</span><br><span class="line">		inc(j,<span class="number">0</span>,m<span class="number">-1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span>(a[i][j]) v1.push_back(j); </span><br><span class="line">		&#125;</span><br><span class="line">		inc(j,<span class="number">0</span>,h<span class="number">-1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span>(b[i][j]) v2.push_back(j);</span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">int</span> c1=v1.size(),c2=v2.size();</span><br><span class="line">		<span class="keyword">if</span>((c1&amp;&amp;!c2)||(c2&amp;&amp;!c1)) &#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;<span class="string">"-1\n"</span>;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">if</span>(!c1&amp;&amp;!c2) &#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(c1&gt;c2) &#123;</span><br><span class="line">			inc(j,<span class="number">0</span>,c1-c2) q.push_back(&#123;i,v1[j],v2[<span class="number">0</span>]&#125;);</span><br><span class="line">			inc(j,c1-c2+<span class="number">1</span>,c1<span class="number">-1</span>) q.push_back(&#123;i,v1[j],v2[j-(c1-c2)]&#125;);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			inc(j,<span class="number">0</span>,c2-c1) q.push_back(&#123;i,v1[<span class="number">0</span>],v2[j]&#125;);</span><br><span class="line">			inc(j,c2-c1+<span class="number">1</span>,c2<span class="number">-1</span>) q.push_back(&#123;i,v1[j-(c2-c1)],v2[j]&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;p.size()&lt;&lt;<span class="string">"\n"</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> e:p)<span class="built_in">cout</span>&lt;&lt;e.u&lt;&lt;<span class="string">" "</span>&lt;&lt;e.v&lt;&lt;<span class="string">" "</span>&lt;&lt;e.w&lt;&lt;<span class="string">"\n"</span>;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;q.size()&lt;&lt;<span class="string">"\n"</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> e:q)<span class="built_in">cout</span>&lt;&lt;e.u&lt;&lt;<span class="string">" "</span>&lt;&lt;e.v&lt;&lt;<span class="string">" "</span>&lt;&lt;e.w&lt;&lt;<span class="string">"\n"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="I"><a href="#I" class="headerlink" title="I"></a>I</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inc(x,l,r) for(int x=l;x&lt;=r;x++)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,a[maxn],b[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">	inc(i,<span class="number">0</span>,n<span class="number">-1</span>)<span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">	inc(i,<span class="number">0</span>,n<span class="number">-1</span>)<span class="built_in">cin</span>&gt;&gt;b[i];</span><br><span class="line">	sort(b,b+n);</span><br><span class="line">	<span class="keyword">int</span> r=<span class="number">0</span>;</span><br><span class="line">	inc(i,<span class="number">0</span>,n<span class="number">-1</span>)&#123;</span><br><span class="line">		<span class="keyword">int</span> p=lower_bound(b,b+n,a[i])-b;</span><br><span class="line">		<span class="keyword">int</span> mx=<span class="built_in">abs</span>(a[i]-b[p]);</span><br><span class="line">		<span class="keyword">if</span>(p)mx=min(mx,<span class="built_in">abs</span>(a[i]-b[p<span class="number">-1</span>]));</span><br><span class="line">		r=max(r,mx);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;r&lt;&lt;<span class="string">"\n"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="J"><a href="#J" class="headerlink" title="J"></a>J</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">	<span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">	<span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">		o = (o &lt;&lt; <span class="number">3</span>)+(o &lt;&lt; <span class="number">1</span>)+(c - <span class="number">48</span>);</span><br><span class="line">	<span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> len[MAXN][MAXN];</span><br><span class="line"><span class="keyword">bool</span> mk[MAXN][MAXN];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; L[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n = input(), m = n * (n - <span class="number">1</span>) / <span class="number">2</span>, u, v, l;</span><br><span class="line">	fore(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">		u = input(); v = input(); l = input();</span><br><span class="line">		L[u].emplace_back(l);</span><br><span class="line">		L[v].emplace_back(l);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">0</span>;</span><br><span class="line">	fore(u, <span class="number">1</span>, n)</span><br><span class="line">	&#123;</span><br><span class="line">		sort(L[u].begin(), L[u].end());</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i += <span class="number">2</span>)</span><br><span class="line">			res += L[u][i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/21/CCPC%E7%BB%B5%E9%98%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潘曲阳 朱霖淇 刘浩钊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Railroad Guerrilla">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/21/CCPC%E7%BB%B5%E9%98%B3/" itemprop="url">CCPC绵阳</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-21T14:59:52+08:00">
                2020-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CCPC/" itemprop="url" rel="index">
                    <span itemprop="name">CCPC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="B-Building-Blocks"><a href="#B-Building-Blocks" class="headerlink" title="B.Building Blocks"></a><a href="https://codeforces.com/gym/102822/problem/B" target="_blank" rel="noopener">B.Building Blocks</a></h2><h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>(建议看题目的图片)</p>
<p>对于一个 $n\times m(n, m\leq 10^5)$ 的三维图形，它由若干 $1\times 1\times 1$ 的方格堆砌而成，现在告诉你一个斜视图（就是从45度角看过去）长啥样，以及 $k\leq 10^5$ 个坐标上的方格数，输出有多少三位图形斜视图看过去是这样的。</p>
<h3 id="题解-DP-容斥"><a href="#题解-DP-容斥" class="headerlink" title="题解:DP+容斥"></a>题解:DP+容斥</h3><p>显然按照斜向DP，对于第 $i$ 斜列， 它能够影响到的斜视图的第 $i-1, i$ 列， $dp[i][l_1][l_2]$ 表示填充第 $i$ 列，是否满足第 $i - 1$ 列和第 $i$ 列的限制条件的方案数</p>
<p>那 $k$ 个坐标上的方格数很好处理，实际上就是限制一下转移而已</p>
<p>现讨论无限制条件下的转移</p>
<p>令 $a = x _ {i - 1}, b = x _ i$</p>
<script type="math/tex; mode=display">dp[i][1][0] = \begin{cases}
dp[i - 1][1][1] \times a^k + dp[i - 1][1][0]\times[a^k - (a - 1)^k] &{a < b}\\
dp[i - 1][1][1] \times (b - 1)^k &a \geq b
\end{cases}</script><script type="math/tex; mode=display">dp[i][1][1] = \begin{cases}
dp[i-1][1][0]\times[a^k-(a-1)^k] &a=b\\
dp[i-1][1][1]\times[b^k-(b-1)^k] &a>b\\
0&a<b
\end{cases}</script><p>有限制条件转移见代码（另：第二维实际上完全没用，仅仅是为了方便理解才加上的）</p>
<h2 id="C-Code-a-Trie"><a href="#C-Code-a-Trie" class="headerlink" title="C.Code a Trie"></a><a href="https://codeforces.com/gym/102822/problem/C" target="_blank" rel="noopener">C.Code a Trie</a></h2><h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>有一颗Trie树，树上每个点有唯一权值，具体结构未知</p>
<p>先进行 $n$ 次询问，每次询问一个字符串，返回的是字符串在Trie树上的最大匹配的点的权值（也就是说到达Trie的叶子节点后就不会继续移动了）</p>
<p>问Trie树最少有多少个点</p>
<h3 id="题解-LCA-贪心"><a href="#题解-LCA-贪心" class="headerlink" title="题解:LCA+贪心"></a>题解:LCA+贪心</h3><p>对询问的串建一颗Trie树，并在每个串最后一个字符对应的节点打上相应的权值标记。</p>
<p>对于所有权值相同的点，他们的LCA为他们的最大匹配的最深的可能点，从这个点往上所有的点都可以为最大匹配的点。</p>
<p>考虑不合法情况：对每个点，将它到它的LCA的点的路径上的点（不包括LCA）进行染色。当一个点被染上两种颜色时，极为不合法。</p>
<p>考虑最小点的个数：也就是我们要在合法的情况下尽量将匹配点上移。</p>
<p>显然对于一个非LCA点而言，它能够成为LCA点当且仅当它的某一子树中有且仅有一个LCA点，此时那个点可以上移至当前点。</p>
<p>DFS统计一下即可。</p>
<h2 id="D-Defuse-the-Bombs"><a href="#D-Defuse-the-Bombs" class="headerlink" title="D.Defuse the Bombs"></a><a href="https://codeforces.com/gym/102822/problem/D" target="_blank" rel="noopener">D.Defuse the Bombs</a></h2><h3 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h3><p>有一排炸弹，有不同的倒计时。</p>
<p>每一秒钟，你可以选择一个炸弹，使其倒计时 + 1秒，其余炸弹倒计时均 -1</p>
<p>问最久多长时间后会有一个炸弹爆炸。</p>
<h3 id="题解-二分"><a href="#题解-二分" class="headerlink" title="题解:二分"></a>题解:二分</h3><p>二分一个最长时间，然后验证</p>
<h2 id="E-Escape-from-the-Island"><a href="#E-Escape-from-the-Island" class="headerlink" title="E.Escape from the Island"></a><a href="https://codeforces.com/gym/102822/problem/E" target="_blank" rel="noopener">E.Escape from the Island</a></h2><h3 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h3><p>有一张图，$n$ 个点， $m$ 条有向边，一个限制条件 $k$  ($n, m, k\leq 10^5$) ，将第 $n$ 个点视为重点。</p>
<p>对于正常移动，可视为无向图，每次移动时消耗时间代价为1，限制条件为最多连续进行不超过 $k$ 次正常移动， 然后进行一次随机移动，这时仅沿着有向边顺向移动，若没有以当前点为起点的边，则不动，但无论是否移动，均消耗1个时间代价，问在最差的情况下，以每个点为起点移动到终点最少需要多少时间。</p>
<h3 id="题解-BFS-DP-拓扑排序"><a href="#题解-BFS-DP-拓扑排序" class="headerlink" title="题解:BFS+DP+拓扑排序"></a>题解:BFS+DP+拓扑排序</h3><p>显然反向跑，但下列讨论是以正向建图为前提的</p>
<p>将随机转移的最差情况视为在以当前点为起点的边中找到最大的转移（前提是那些转移的状态已经跑完，所以要用拓扑）</p>
<p>正常转移则为找最小转移。</p>
<p>$dp[u][k]$ 为以 $u$ 为起点，还能连续正常转移 $k$ 步的最小代价</p>
<script type="math/tex; mode=display">
dp[u][k] = \begin{cases}
min\{dp[v][k - 1]\} + 1 & k > 0 \and ((u,v)\in G \or (v, u)\in G) \\
max\{dp[v][K]\} + 1 & k = 0 \and (u, v)\in G\\
min\{dp[u][nk]\} & nk > k
\end{cases}</script><h2 id="G-Game-of-Cards"><a href="#G-Game-of-Cards" class="headerlink" title="G.Game of Cards"></a><a href="https://codeforces.com/gym/102822/problem/G" target="_blank" rel="noopener">G.Game of Cards</a></h2><h3 id="题意-4"><a href="#题意-4" class="headerlink" title="题意"></a>题意</h3><p>给若干张权值为 0、1、2、3的牌，每次可以选两张权值不超过3的牌权值相加合并成一张牌，第一个无法操作的人视为输了，问先后手谁赢</p>
<h3 id="题解-博弈-打表"><a href="#题解-博弈-打表" class="headerlink" title="题解:博弈+打表"></a>题解:博弈+打表</h3><p>打表找规律</p>
<h2 id="H-Hide-and-Seek"><a href="#H-Hide-and-Seek" class="headerlink" title="H.Hide and Seek"></a><a href="https://codeforces.com/gym/102822/problem/H" target="_blank" rel="noopener">H.Hide and Seek</a></h2><h2 id="题意-5"><a href="#题意-5" class="headerlink" title="题意"></a>题意</h2><p>有两个点 $a, b$ ，给定两个点到原点的曼哈顿距离，以及两个点之间的曼哈顿距离，问平面上有多少个点对满足条件</p>
<h3 id="题解-分类讨论"><a href="#题解-分类讨论" class="headerlink" title="题解:分类讨论"></a>题解:分类讨论</h3><p>令 $a$ 到原点的曼哈顿距离为 $a$ ， $b$ 到原点的曼哈顿距离为 $b$ ，两点之间的曼哈顿距离为 $c$ ，以下讨论均以 $a &lt; b$ 为前提</p>
<script type="math/tex; mode=display">
res = \begin{cases}
1 & a=b=c=0\\
4\times (c + a \times c + a) & c=b - a\\
0 & (c\in[b-a, b+a] \and (c+b-a)\&1\neq0)\\
4\times (a + b + c) & (c\in[b-a, b+a] \and (c + b - a) \& 1 = 0)\\
4\times(a\times(b + 1) + b) & c=a+b\\
\end{cases}</script><h2 id="J-Joy-of-Handcraft"><a href="#J-Joy-of-Handcraft" class="headerlink" title="J.Joy of Handcraft"></a><a href="https://codeforces.com/gym/102822/problem/J" target="_blank" rel="noopener">J.Joy of Handcraft</a></h2><h3 id="题意-6"><a href="#题意-6" class="headerlink" title="题意"></a>题意</h3><p>对于长度为 $m$ 的区间，有 $n$ 种灯泡，第 $i$ 种灯泡的亮度为 $t_i$，分布规律参数为 $x_i$ ，它仅分布在 $[2kx_i + 1, 2kx_i+x_i]$ 区间（ $k$ 为整数 ）($n, m, k\leq 10^5$)。现在为对于 $[1,m]$ 上的每个点，分布其中的最亮的灯泡为哪种</p>
<h3 id="题解-分块-线段树-贪心-并查集"><a href="#题解-分块-线段树-贪心-并查集" class="headerlink" title="题解:分块+线段树/贪心+并查集"></a>题解:分块+线段树/贪心+并查集</h3><p><strong>解法1:分块+线段树</strong></p>
<p>对于足够大的 $x_i$ ，我们在线段树上修改它，而对于较小的 $x_i$ ，我们暴力维护。</p>
<p>设分界点为 $\sqrt m$ ，则对于单个 $x_i \geq \sqrt m$ ，其区间修改复杂度为 $O(\sqrt{m} \cdot logm)$，单次查询 $O(logm)$ ，总复杂度 $O(n\sqrt{m}\cdot logm)$</p>
<p>对于所有 $x_i&lt; \sqrt{m}$ ，查询复杂度不超过 $n\sqrt m$</p>
<p>卡得过去</p>
<p><strong>解法2:贪心+并查集</strong></p>
<p>离线处理，将所有灯泡按亮度排序，且对于每一种 $x_i$ ，只保留一个最大亮度的灯泡。然后按照亮度从大到小更新所有灯泡，每更新完一个点就将其合并到下一个点（并查集处理，下次更新时会跳过它）</p>
<h2 id="K-Knowledge-is-Power"><a href="#K-Knowledge-is-Power" class="headerlink" title="K.Knowledge is Power"></a><a href="https://codeforces.com/gym/102822/problem/K" target="_blank" rel="noopener">K.Knowledge is Power</a></h2><h3 id="题意-7"><a href="#题意-7" class="headerlink" title="题意"></a>题意</h3><p>给一个数 $x\in[5, 10^9]$ ，求一个最小长度的数列 $S = \{a_1, a_2, a_3, …, a_n\}$ 满足</p>
<ul>
<li><p>$n\geq 2$</p>
</li>
<li><p>$a_i &gt; 1, i\in[1, n]$</p>
</li>
<li><p>$\sum_{i = 1}^na_i=x$</p>
</li>
<li><p>任意一对数 $a_i, a_j, i\neq j$ 互质</p>
</li>
</ul>
<p>输出满足条件的数列中数列最大值与最小值之差的最小值</p>
<h3 id="题解-找规律"><a href="#题解-找规律" class="headerlink" title="题解:找规律"></a>题解:找规律</h3><p>仅有6是无解的</p>
<p>若 $x$ 为奇数，则奇偶分解一下，二者一定互质，答案为1</p>
<p>否则，对于 $x = 4y$ ，将其分解为 $2y + 1$ 和 $2y - 1$ ，对于 $x = 4y + 2$ ，将其分解为 $2y + 3$ 和 $2y - 1$ ，则能保证答案的上界不超过 $4$ ， 对更小的答案做一个验证即可。</p>
<h2 id="L-Lottery"><a href="#L-Lottery" class="headerlink" title="L.Lottery"></a><a href="https://codeforces.com/gym/102822/problem/L" target="_blank" rel="noopener">L.Lottery</a></h2><h3 id="题意-8"><a href="#题意-8" class="headerlink" title="题意"></a>题意</h3><p>有 $n\leq 10^5$ 种球，每个球有一个权值 $2^{a_i},a_i\leq 10^9$ ， 每种球有 $x_i\leq 10^9$ 个，问这些球最多能组成多少种权值</p>
<h3 id="题解-模拟"><a href="#题解-模拟" class="headerlink" title="题解:模拟"></a>题解:模拟</h3><p>对于一个种球 $2^{a_i}$ ，我们将它的权值计为 $2^0 = 1$ 按二进制累加，当它 $2^{a_i+1}$ 的时候，我们就将 $2^{a_i + 1}$ 上的权值按 $2^1 = 2$ 累加到原先的结果上，直到无法累加到下一位为止，记录当前结果，累乘到结果里。然后找下一种个数不为0的球，重复上述过程，至于为什么是对的，我发现很难用语言描述。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> o; <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXL = <span class="number">2e5</span> + <span class="number">5</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">li <span class="title">KSM</span><span class="params">(li a, li t)</span></span>&#123;</span><br><span class="line">    li res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(t)&#123;</span><br><span class="line">        <span class="keyword">if</span>(t &amp; <span class="number">1</span>) res = res * a % mod;</span><br><span class="line">        a = a * a % mod;</span><br><span class="line">        t &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">li <span class="title">DEL</span><span class="params">(li a, li t)</span></span>&#123;<span class="keyword">return</span> (KSM(a, t) - KSM(a - <span class="number">1</span>, t) + mod) % mod;&#125;</span><br><span class="line"></span><br><span class="line">li dp[MAXL][<span class="number">2</span>], cnt[MAXL], h[MAXL];</span><br><span class="line"><span class="keyword">bool</span> mk[MAXL][<span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> ncase = <span class="number">1</span>, T = input(); ncase &lt;= T; ncase++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>, ncase);</span><br><span class="line">        li n = input(), m = input(), K = input(), flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m; i++)</span><br><span class="line">            h[i] = input(),</span><br><span class="line">            cnt[i] = <span class="number">0</span>,</span><br><span class="line">            <span class="built_in">memset</span>(mk[i], <span class="number">0</span>, <span class="keyword">sizeof</span>(mk[i]));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= K; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = input(), y = input(), nh = input();</span><br><span class="line">            <span class="keyword">if</span>(nh &gt; min(h[x + y], h[x + y - <span class="number">1</span>])) flag = <span class="number">0</span>;</span><br><span class="line">            cnt[x + y]++;</span><br><span class="line">            <span class="keyword">if</span>(nh == min(h[x + y], h[x + y - <span class="number">1</span>]))</span><br><span class="line">                mk[x + y][nh == h[x + y - <span class="number">1</span>]][nh == h[x + y]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">"0"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(n &gt; m) swap(n, m);</span><br><span class="line">        li k, a, b;</span><br><span class="line">        <span class="keyword">for</span>(li i = <span class="number">2</span>; i &lt;= n + m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            k = min(i - <span class="number">1</span>, n + m - i + <span class="number">1</span>);</span><br><span class="line">            k = min(k, n);</span><br><span class="line">            k -= cnt[i];</span><br><span class="line">            a = h[i - <span class="number">1</span>]; b = h[i];</span><br><span class="line">            <span class="comment">//a==b</span></span><br><span class="line">            <span class="keyword">if</span>(a == b)&#123;</span><br><span class="line">                dp[i][<span class="number">1</span>] = (dp[i - <span class="number">1</span>][<span class="number">0</span>] + dp[i - <span class="number">1</span>][<span class="number">1</span>]) % mod * (mk[i][<span class="number">1</span>][<span class="number">1</span>] ? KSM(a, k) : DEL(a, k)) % mod;</span><br><span class="line">                <span class="keyword">if</span>(!mk[i][<span class="number">1</span>][<span class="number">1</span>])dp[i][<span class="number">0</span>] = dp[i - <span class="number">1</span>][<span class="number">1</span>] * KSM(b - <span class="number">1</span>, k) % mod;</span><br><span class="line">                <span class="keyword">else</span> dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a &gt; b)&#123;</span><br><span class="line">                <span class="comment">//mk[i][0][1]</span></span><br><span class="line">                dp[i][<span class="number">1</span>] = dp[i - <span class="number">1</span>][<span class="number">1</span>] * (mk[i][<span class="number">0</span>][<span class="number">1</span>] ? KSM(b, k) : DEL(b, k)) % mod;</span><br><span class="line">                <span class="keyword">if</span>(!mk[i][<span class="number">0</span>][<span class="number">1</span>]) dp[i][<span class="number">0</span>] = dp[i - <span class="number">1</span>][<span class="number">1</span>] * KSM(b - <span class="number">1</span>, k) % mod;</span><br><span class="line">                <span class="keyword">else</span> dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//mk[i][1][0]</span></span><br><span class="line">                dp[i][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">                dp[i][<span class="number">0</span>] = dp[i - <span class="number">1</span>][<span class="number">1</span>] * KSM(a, k) % mod + dp[i - <span class="number">1</span>][<span class="number">0</span>] * (mk[i][<span class="number">1</span>][<span class="number">0</span>] ? KSM(a, k) : DEL(a, k)) % mod;</span><br><span class="line">                dp[i][<span class="number">0</span>] %= mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, dp[n + m][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">5</span>, MAXL = <span class="number">5e5</span> + <span class="number">5</span>, MAXC = <span class="number">26</span>, MAXF = <span class="number">19</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> able = <span class="number">1</span>, res = <span class="number">0</span>, tot = <span class="number">0</span>, nmk = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> ch[MAXL][MAXC], fa[MAXL][MAXF + <span class="number">1</span>], dep[MAXL], rep[MAXL], cnt[MAXL], tmk[MAXL], ban[MAXL];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mp, refl;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mk[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    res = <span class="number">0</span>;</span><br><span class="line">    able = <span class="number">1</span>;</span><br><span class="line">    fore(i, <span class="number">0</span>, tot)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(ch[i], <span class="number">0</span>, <span class="keyword">sizeof</span>(ch[i]));</span><br><span class="line">        ban[i] = rep[i] = cnt[i] = tmk[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    tot = <span class="number">0</span>;</span><br><span class="line">    mp.clear();</span><br><span class="line">    fore(i, <span class="number">1</span>, nmk) mk[i].clear();</span><br><span class="line">    nmk = <span class="number">0</span>;</span><br><span class="line">    refl.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Insert</span><span class="params">(<span class="built_in">string</span> &amp;s, <span class="keyword">int</span> mark)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rt = <span class="number">0</span>, len = s.length(), nxt;</span><br><span class="line">    Fore(i, <span class="number">0</span>, len)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!ch[rt][nxt = s[i] - <span class="string">'a'</span>])</span><br><span class="line">            ch[rt][nxt] = ++tot;</span><br><span class="line">        rt = ch[rt][nxt];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(mp.count(mark) == <span class="number">0</span>)</span><br><span class="line">        mp[mark] = ++nmk;</span><br><span class="line">    mk[mp[mark]].emplace_back(rt);</span><br><span class="line">    <span class="keyword">if</span>(tmk[rt] &amp;&amp; tmk[rt] != mp[mark])able = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> tmk[rt] = mp[mark];</span><br><span class="line">    <span class="keyword">return</span> rt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">    fa[u][<span class="number">0</span>] = f;</span><br><span class="line">    dep[u] = dep[f] + <span class="number">1</span>;    </span><br><span class="line">    fore(i, <span class="number">1</span>, MAXF)</span><br><span class="line">        fa[u][i] = fa[fa[u][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">    Fore(v, <span class="number">0</span>, MAXC)</span><br><span class="line">        <span class="keyword">if</span>(ch[u][v])</span><br><span class="line">            Dfs(ch[u][v], u);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dep[u] &lt; dep[v]) swap(u, v);</span><br><span class="line">    <span class="keyword">int</span> delta = dep[u] - dep[v];</span><br><span class="line">    fore(i, <span class="number">0</span>, MAXF)</span><br><span class="line">        <span class="keyword">if</span>(delta &amp; (<span class="number">1</span> &lt;&lt; i))</span><br><span class="line">            u = fa[u][i];</span><br><span class="line">    <span class="keyword">if</span>(u == v) <span class="keyword">return</span> u;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = MAXF; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">if</span>(fa[u][i] != fa[v][i])</span><br><span class="line">            u = fa[u][i],</span><br><span class="line">            v = fa[v][i];</span><br><span class="line">    <span class="keyword">return</span> fa[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MK</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> st, <span class="keyword">int</span> ni)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(u != st)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; "Ban " &lt;&lt; u &lt;&lt; endl;</span></span><br><span class="line">        ban[u] = ni;</span><br><span class="line">        u = fa[u][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ban[u] = 1;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Cal</span><span class="params">(<span class="keyword">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Fore(i, <span class="number">0</span>, MAXC)</span><br><span class="line">        <span class="keyword">if</span>(ch[u][i])</span><br><span class="line">        &#123;</span><br><span class="line">            Cal(ch[u][i]);</span><br><span class="line">            cnt[u] += cnt[ch[u][i]];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(rep[u] &gt; <span class="number">1</span>) able = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(cnt[u] &gt; <span class="number">1</span> &amp;&amp; !rep[u])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> add = <span class="number">1</span>;</span><br><span class="line">        Fore(i, <span class="number">0</span>, MAXC)</span><br><span class="line">            <span class="keyword">if</span>(ch[u][i] &amp;&amp; cnt[ch[u][i]] == <span class="number">1</span>)</span><br><span class="line">                add = <span class="number">0</span>;</span><br><span class="line">        res += add;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(rep[u]) res++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> str[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GO</span><span class="params">(<span class="built_in">string</span> &amp;s, <span class="keyword">int</span> ni)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rt = <span class="number">0</span>, len = s.length(), nxt;</span><br><span class="line">    Fore(i, <span class="number">0</span>, len)</span><br><span class="line">    &#123;</span><br><span class="line">        nxt = s[i] - <span class="string">'a'</span>;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; rt &lt;&lt; " ";</span></span><br><span class="line">        <span class="keyword">if</span>(ban[rt] &amp;&amp; (ban[rt] != ni)) able = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> rt = ch[rt][nxt];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ban[rt] &amp;&amp; (ban[rt] != ni)) able = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; rt &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> ncase = <span class="number">1</span>, T = input(); ncase &lt;= T; ncase++)</span><br><span class="line">    &#123;</span><br><span class="line">        res = <span class="number">0</span>;</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">int</span> n = input();</span><br><span class="line">        fore(i, <span class="number">1</span>, n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; str[i];</span><br><span class="line">            refl[Insert(str[i], input())] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        Dfs(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        fore(i, <span class="number">1</span>, nmk)&#123;</span><br><span class="line">            <span class="keyword">int</span> p = mk[i].back();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> np : mk[i])</span><br><span class="line">                p = LCA(np, p);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> np : mk[i])</span><br><span class="line">                MK(np, p, i);</span><br><span class="line">            <span class="keyword">if</span>(tmk[p] &amp;&amp; tmk[p] != i)able = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> tmk[p] = i;</span><br><span class="line">            cnt[p]++;</span><br><span class="line">            rep[p]++;</span><br><span class="line">        &#125;</span><br><span class="line">        fore(i, <span class="number">1</span>, nmk)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> np : mk[i])</span><br><span class="line">                GO(str[refl[np]], i);</span><br><span class="line">        &#125;</span><br><span class="line">        Cal(<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, ncase, able ? res : <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="D"><a href="#D" class="headerlink" title="D"></a>D</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">li A[MAXN], n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(li t)</span></span>&#123;</span><br><span class="line">	li del = <span class="number">0</span>;</span><br><span class="line">	fore(i, <span class="number">1</span>, n)</span><br><span class="line">		<span class="keyword">if</span>(A[i] &lt; t) del += t - A[i];</span><br><span class="line">	<span class="keyword">return</span> del &lt;= t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//	freopen("In.txt", "r", stdin);</span></span><br><span class="line"><span class="comment">//	freopen("Out.txt", "w", stdout);</span></span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T); </span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> ncase = <span class="number">1</span>; ncase &lt;= T; ncase++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		fore(i, <span class="number">1</span>, n) <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;A[i]);</span><br><span class="line">		li L = <span class="number">0</span>, R = (li)<span class="number">2e9</span>+<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">while</span>(L + <span class="number">1</span> &lt; R)</span><br><span class="line">		&#123;</span><br><span class="line">			li mid = (L + R) / <span class="number">2</span>;</span><br><span class="line">			<span class="keyword">if</span>(check(mid)) L = mid;</span><br><span class="line">			<span class="keyword">else</span> R = mid;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>, ncase, R);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="E"><a href="#E" class="headerlink" title="E"></a>E</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">5</span>, MAXK = <span class="number">51</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">3</span>)+(o &lt;&lt; <span class="number">1</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">queue</span>&lt;pii&gt; Q;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; Edge[MAXN], REdge[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, m, K, dis[MAXN][MAXK], d[MAXN], vis[MAXN], In[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UPD</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> k, <span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k &gt; K || k &lt; <span class="number">0</span> || dis[v][k] != <span class="number">0x3f3f3f3f</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; "to " &lt;&lt; v &lt;&lt; " " &lt;&lt; k &lt;&lt; " " &lt;&lt; t &lt;&lt; endl;</span></span><br><span class="line">    dis[v][k] = t;</span><br><span class="line">    In[v]++;</span><br><span class="line">    Q.emplace(v, k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DIJ</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fore(i, <span class="number">1</span>, n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dis[i], <span class="number">0x3f3f3f3f</span>, <span class="keyword">sizeof</span>(dis[i]));</span><br><span class="line">        d[i] = Edge[i].size();</span><br><span class="line">        vis[i] = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; i &lt;&lt; " " &lt;&lt; d[i] &lt;&lt; endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fore(nk, <span class="number">0</span>, K) UPD(n, nk, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span>(Q.size())&#123;</span><br><span class="line">        pii np = Q.front(); Q.pop();</span><br><span class="line">        <span class="keyword">int</span> u = np.fi, k = np.se, t = dis[u][k];</span><br><span class="line">        <span class="keyword">if</span>(k)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> v : Edge[u])</span><br><span class="line">                UPD(v, k - <span class="number">1</span>, t + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> v : REdge[u])</span><br><span class="line">                UPD(v, k - <span class="number">1</span>, t + <span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> v : REdge[u])</span><br><span class="line">            &#123;</span><br><span class="line">                d[v]--;</span><br><span class="line">                <span class="keyword">if</span>(!d[v])&#123;</span><br><span class="line">                    fore(nk, <span class="number">0</span>, K)</span><br><span class="line">                        UPD(v, nk, t + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(Edge[u].size() == <span class="number">0</span>)</span><br><span class="line">                fore(nk, <span class="number">0</span>, K)</span><br><span class="line">                    UPD(u, nk, t + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fore(u, <span class="number">1</span>, n)&#123;</span><br><span class="line">        <span class="keyword">int</span> res = dis[u][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span>(res == <span class="number">0x3f3f3f3f</span>) <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("Out.txt", "w", stdout);</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> T = input(), ncase = <span class="number">1</span>; ncase &lt;= T; ncase++)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d:\n"</span>, ncase);</span><br><span class="line">        n = input(); m = input(); K = input();</span><br><span class="line">        fore(u, <span class="number">1</span>, n)Edge[u].clear(), REdge[u].clear();</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        fore(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">            u = input(); v = input();</span><br><span class="line">            Edge[u].emplace_back(v);</span><br><span class="line">            REdge[v].emplace_back(u);</span><br><span class="line">        &#125;</span><br><span class="line">        DIJ();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="G"><a href="#G" class="headerlink" title="G"></a>G</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t,c0,c1,c2,c3;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> c=<span class="number">1</span>;c&lt;=t;c++)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>,&amp;c0,&amp;c1,&amp;c2,&amp;c3);</span><br><span class="line">		<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(c1+c2+c3) &#123;</span><br><span class="line">			flag=(c0&amp;<span class="number">1</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(c0)flag=((c0<span class="number">-1</span>)&amp;<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">"Case #%d: Rabbit\n"</span>,c);</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"Case #%d: Horse\n"</span>,c);</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(flag&amp;<span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span>(c2==<span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span>(c1%<span class="number">3</span>!=<span class="number">2</span>)flag=<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">else</span> flag=<span class="number">0</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span>(c2==<span class="number">1</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span>(c1%<span class="number">3</span>==<span class="number">0</span>)flag=<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">else</span> flag=<span class="number">0</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">if</span>(c1%<span class="number">3</span>!=<span class="number">1</span>)flag=<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">else</span> flag=<span class="number">0</span>;	</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">"Case #%d: Rabbit\n"</span>,c);</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"Case #%d: Horse\n"</span>,c);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(c1%<span class="number">3</span>&amp;&amp;!(c1%<span class="number">3</span>==<span class="number">1</span>&amp;&amp;c2==<span class="number">0</span>)) flag^=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">"Case #%d: Rabbit\n"</span>,c);</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"Case #%d: Horse\n"</span>,c);			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="H"><a href="#H" class="headerlink" title="H"></a>H</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inc(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"></span><br><span class="line">ll t, a, b, c;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;t);</span><br><span class="line">	inc(nt, <span class="number">1</span>, t) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%lld %lld %lld"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">		<span class="keyword">if</span>(a &gt; b) swap(a, b);</span><br><span class="line">		ll res = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(c &gt; a + b || c &lt; b - a) res = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(c == b - a) res = <span class="number">4L</span>L * (c + a * c + a);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(c == b + a) res = <span class="number">4L</span>L * (a * (b + <span class="number">1</span>) + b);</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(((b - a)&amp;<span class="number">1</span>) != (c &amp; <span class="number">1</span>))res = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span> res = a + b + c;</span><br><span class="line">            res = res &lt;&lt; <span class="number">2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">if</span>(a+b+c == <span class="number">0</span>) res = <span class="number">1</span>;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>, nt, res);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="J"><a href="#J" class="headerlink" title="J"></a>J</h3><p>线段树做法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b ;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">1e5</span> + <span class="number">5</span>, MAXL = <span class="number">1005</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> SGT</span><br><span class="line">&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">define</span> ls (o &lt;&lt; 1)</span></span><br><span class="line">	<span class="meta">#<span class="meta-keyword">define</span> rs (o &lt;&lt; 1 | 1)</span></span><br><span class="line">	<span class="meta">#<span class="meta-keyword">define</span> mid ((l + r) &gt;&gt; 1)</span></span><br><span class="line">	<span class="keyword">int</span> L, R, NL, nv, wait[MAXM &lt;&lt; <span class="number">3</span>], v[MAXM &lt;&lt; <span class="number">3</span>];</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">		v[o] = wait[o] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(l != r)</span><br><span class="line">		&#123;</span><br><span class="line">			init(ls, l, mid);</span><br><span class="line">			init(rs, mid + <span class="number">1</span>, r);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">PD</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(l != r)</span><br><span class="line">		&#123;</span><br><span class="line">			v[ls] = max(v[ls], wait[o]);</span><br><span class="line">			wait[ls] = max(wait[ls], wait[o]);</span><br><span class="line">			v[rs] = max(v[rs], wait[o]);</span><br><span class="line">			wait[rs] = max(wait[rs], wait[o]);</span><br><span class="line">		&#125;</span><br><span class="line">		wait[o] = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">			v[o] = max(v[o], nv);</span><br><span class="line">			wait[o] = max(wait[o], nv);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			PD(o, l, r);</span><br><span class="line">			<span class="keyword">if</span>(L &lt;= mid &amp;&amp; l &lt;= R) Add(ls, l, mid);</span><br><span class="line">			<span class="keyword">if</span>(L &lt;= r &amp;&amp; mid &lt; R) Add(rs, mid + <span class="number">1</span>, r);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">UPD</span><span class="params">(<span class="keyword">int</span> P, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		nv = v;</span><br><span class="line">		<span class="keyword">for</span>(L = <span class="number">1</span>, R = P, P &lt;&lt;= <span class="number">1</span>; L &lt;= NL; L += P, R = min(NL, R + P))</span><br><span class="line">			Add(<span class="number">1</span>, <span class="number">1</span>, NL);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(l == r) <span class="keyword">return</span> v[o];</span><br><span class="line">		<span class="keyword">if</span>(wait[o]) PD(o, l, r);</span><br><span class="line">		<span class="keyword">if</span>(L &lt;= mid) <span class="keyword">return</span> query(ls, l, mid);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> query(rs, mid + <span class="number">1</span>, r); </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">QRY</span><span class="params">(<span class="keyword">int</span> p)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		L = p;</span><br><span class="line">		<span class="keyword">return</span> query(<span class="number">1</span>, <span class="number">1</span>, NL);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">undef</span> ls</span></span><br><span class="line">	<span class="meta">#<span class="meta-keyword">undef</span> rs</span></span><br><span class="line">	<span class="meta">#<span class="meta-keyword">undef</span> mid</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> mk[MAXL];</span><br><span class="line"><span class="built_in">vector</span>&lt;pii&gt; use;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> ncase = <span class="number">1</span>; ncase &lt;= T; ncase++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> n, m;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">		SGT::NL = m;</span><br><span class="line">		SGT::init(<span class="number">1</span>, <span class="number">1</span>, m);</span><br><span class="line">		use.clear();</span><br><span class="line">		<span class="built_in">memset</span>(mk, <span class="number">0</span>, <span class="keyword">sizeof</span>(mk));</span><br><span class="line">		<span class="keyword">int</span> a, b;</span><br><span class="line">		fore(i, <span class="number">1</span>, n)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">			<span class="keyword">if</span>(a &lt;= <span class="number">1000</span>) mk[a] = max(mk[a], b);</span><br><span class="line">			<span class="keyword">else</span> SGT::UPD(a, b);</span><br><span class="line">		&#125;</span><br><span class="line">		fore(i, <span class="number">1</span>, <span class="number">1000</span>)</span><br><span class="line">			<span class="keyword">if</span>(mk[i] != <span class="number">0</span>)</span><br><span class="line">				use.emplace_back(i, mk[i]);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>, ncase);</span><br><span class="line">		fore(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">			<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span>(pii &amp;v : use)</span><br><span class="line">				<span class="keyword">if</span>(((i - <span class="number">1</span>) / v.fi) % <span class="number">2</span> == <span class="number">0</span>) res = max(res, v.se);</span><br><span class="line">			res = max(res, SGT::QRY(i));</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d%c"</span>, res,<span class="string">" \n"</span>[i==m]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>并查集做法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b ; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = getchar(); <span class="keyword">int</span> o;</span><br><span class="line">    <span class="keyword">while</span>(c &gt; <span class="number">57</span> || c &lt; <span class="number">48</span>) c = getchar();</span><br><span class="line">    <span class="keyword">for</span>(o = <span class="number">0</span>; c &gt; <span class="number">47</span> &amp;&amp; c &lt; <span class="number">58</span>; c = getchar())</span><br><span class="line">        o = (o &lt;&lt; <span class="number">1</span>)+(o &lt;&lt; <span class="number">3</span>)+(c - <span class="number">48</span>);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, fa[MAXN], mk[MAXN];</span><br><span class="line"><span class="keyword">bool</span> ban[MAXN];</span><br><span class="line">pii P[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Getf</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> (fa[x] == x) ? x : fa[x] = Getf(fa[x]);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Next</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p = Getf(p);</span><br><span class="line">    <span class="keyword">while</span>((p &lt;= n) &amp;&amp; (((p - <span class="number">1</span>) / x) &amp; <span class="number">1</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        p = ((p - <span class="number">1</span>) / x + <span class="number">1</span>) * x + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(p &gt; n) <span class="keyword">return</span> n + <span class="number">1</span>;</span><br><span class="line">        p = Getf(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> ncase = <span class="number">1</span>, T = input(); ncase &lt;= T; ncase++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>, ncase);</span><br><span class="line">        m = input(), n = input();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) mk[i] = <span class="number">0</span>, fa[i] = i;</span><br><span class="line">        fa[n + <span class="number">1</span>] = n + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            P[i].se = input();</span><br><span class="line">            P[i].fi = input();</span><br><span class="line">            ban[P[i].se] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sort(P + <span class="number">1</span>, P + m + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = m; i; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> l = P[i].fi, x = P[i].se;</span><br><span class="line">            <span class="keyword">if</span>(ban[x]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> p = Next(<span class="number">1</span>, x);</span><br><span class="line">            ban[x] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(p &lt;= n)</span><br><span class="line">            &#123;</span><br><span class="line">                mk[p] = l;</span><br><span class="line">                fa[p] = p + <span class="number">1</span>;</span><br><span class="line">                p = Next(p, x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, mk[i], <span class="string">" \n"</span>[i==n]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="K"><a href="#K" class="headerlink" title="K"></a>K</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inc(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int,int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t,n; </span><br><span class="line">pii p[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</span><br><span class="line">	inc(c,<span class="number">1</span>,t)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">		<span class="keyword">int</span> res;</span><br><span class="line">		<span class="keyword">if</span>(<span class="number">6</span>==n)&#123;</span><br><span class="line">			res=<span class="number">-1</span>;</span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(n&amp;<span class="number">1</span>)&#123;</span><br><span class="line">			res=<span class="number">1</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">4</span>==<span class="number">0</span>)&#123;</span><br><span class="line">			res=<span class="number">2</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(n==<span class="number">10</span>) res=<span class="number">3</span>;</span><br><span class="line">			 <span class="keyword">else</span> res=<span class="number">4</span>;</span><br><span class="line">			 <span class="keyword">if</span>((n<span class="number">-4</span>)%<span class="number">3</span>==<span class="number">0</span>) &#123;</span><br><span class="line">			 	<span class="keyword">int</span> a1=(n<span class="number">-4</span>)/<span class="number">3</span>,a2=a1+<span class="number">1</span>,a3=a1+<span class="number">3</span>;</span><br><span class="line">			 	<span class="keyword">if</span>(a1&gt;<span class="number">1</span>&amp;&amp;a2&gt;<span class="number">1</span>&amp;&amp;a3&gt;<span class="number">1</span>&amp;&amp; __gcd(a1,a2)==<span class="number">1</span>&amp;&amp;__gcd(a1,a3)==<span class="number">1</span>&amp;&amp;__gcd(a2,a3)==<span class="number">1</span>) res=<span class="number">3</span>;</span><br><span class="line">			 &#125;</span><br><span class="line">		 	<span class="keyword">if</span>((n<span class="number">-5</span>)%<span class="number">3</span>==<span class="number">0</span>) &#123;</span><br><span class="line">			 	<span class="keyword">int</span> a1=(n<span class="number">-5</span>)/<span class="number">3</span>,a2=a1+<span class="number">2</span>,a3=a1+<span class="number">3</span>;</span><br><span class="line">			 	<span class="keyword">if</span>(a1&gt;<span class="number">1</span>&amp;&amp;a2&gt;<span class="number">1</span>&amp;&amp;a3&gt;<span class="number">1</span>&amp;&amp; __gcd(a1,a2)==<span class="number">1</span>&amp;&amp;__gcd(a1,a3)==<span class="number">1</span>&amp;&amp;__gcd(a2,a3)==<span class="number">1</span>) res=<span class="number">3</span>;</span><br><span class="line">			 &#125;			 </span><br><span class="line">			 <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">0</span>) &#123;</span><br><span class="line">			 	res=<span class="number">2</span>;</span><br><span class="line">			 &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, c, res);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="L"><a href="#L" class="headerlink" title="L"></a>L</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> li long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fore(i, a, b) for(int i = a; i &lt;= b; i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Fore(i, a, b) for(int i = a; i &lt; b; i++) </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>, MAXN = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;use;</span><br><span class="line">pii p[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function">li <span class="title">CAL</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	li res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(use.size())</span><br><span class="line">		res = (res &lt;&lt; <span class="number">1</span> | use.back()) % mod,</span><br><span class="line">		use.pop_back();</span><br><span class="line">	<span class="keyword">return</span> (res + <span class="number">1</span>) % mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//	freopen("In.txt", "r", stdin);</span></span><br><span class="line"><span class="comment">//	freopen("Out.txt", "w", stdout);</span></span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> ncase = <span class="number">1</span>; ncase &lt;= T; ncase++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> n;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">		fore(i, <span class="number">1</span>, n)</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; p[i].fi &gt;&gt; p[i].se;</span><br><span class="line">		sort(p + <span class="number">1</span>, p + n + <span class="number">1</span>);</span><br><span class="line">		li i = <span class="number">1</span>, tmp = <span class="number">0</span>, tp = <span class="number">0</span>, res = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span>(i &lt;= n)&#123;</span><br><span class="line">				<span class="keyword">while</span>(tmp &amp;&amp; tp &lt; p[i].fi)&#123;</span><br><span class="line">					use.emplace_back(tmp &amp; <span class="number">1</span>);</span><br><span class="line">					tmp &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">					tp++;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(!tmp) res = res * CAL() % mod;</span><br><span class="line">				tp = p[i].fi;</span><br><span class="line">				tmp += p[i].se;</span><br><span class="line">				i++;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">while</span>(tmp)use.emplace_back(tmp &amp; <span class="number">1</span>), tmp &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">		res = res * CAL() % mod;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>, ncase, res); </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">潘曲阳 朱霖淇 刘浩钊</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">52</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">潘曲阳 朱霖淇 刘浩钊</span>

  
</div>

<!--

  <div class="powered-by">Powered by <a>HAHA  </a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>

-->



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  


  

  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
  <script src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
  <script async src="/js/cursor/explosion.min.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
